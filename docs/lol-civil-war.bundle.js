(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();const be=[{id:"Aatrox",name:"ì•„íŠ¸ë¡ìŠ¤"},{id:"Ahri",name:"ì•„ë¦¬"},{id:"Akali",name:"ì•„ì¹¼ë¦¬"},{id:"Akshan",name:"ì•„í¬ìƒ¨"},{id:"Alistar",name:"ì•Œë¦¬ìŠ¤íƒ€"},{id:"Ambessa",name:"ì•”ë² ì‚¬"},{id:"Amumu",name:"ì•„ë¬´ë¬´"},{id:"Anivia",name:"ì• ë‹ˆë¹„ì•„"},{id:"Annie",name:"ì• ë‹ˆ"},{id:"Aphelios",name:"ì•„í ë¦¬ì˜¤ìŠ¤"},{id:"Ashe",name:"ì• ì‰¬"},{id:"AurelionSol",name:"ì•„ìš°ë ë¦¬ì˜¨ ì†”"},{id:"Aurora",name:"ì˜¤ë¡œë¼"},{id:"Azir",name:"ì•„ì§€ë¥´"},{id:"Bard",name:"ë°”ë“œ"},{id:"Belveth",name:"ë²¨ë² ìŠ¤"},{id:"Blitzcrank",name:"ë¸”ë¦¬ì¸ í¬ë­í¬"},{id:"Brand",name:"ë¸Œëœë“œ"},{id:"Braum",name:"ë¸Œë¼ì›€"},{id:"Briar",name:"ë¸Œë¼ì´ì–´"},{id:"Caitlyn",name:"ì¼€ì´í‹€ë¦°"},{id:"Camille",name:"ì¹´ë°€"},{id:"Cassiopeia",name:"ì¹´ì‹œì˜¤í˜ì•„"},{id:"Chogath",name:"ì´ˆê°€ìŠ¤"},{id:"Corki",name:"ì½”ë¥´í‚¤"},{id:"Darius",name:"ë‹¤ë¦¬ìš°ìŠ¤"},{id:"Diana",name:"ë‹¤ì´ì• ë‚˜"},{id:"Draven",name:"ë“œë ˆì´ë¸"},{id:"DrMundo",name:"ë¬¸ë„ ë°•ì‚¬"},{id:"Ekko",name:"ì—ì½”"},{id:"Elise",name:"ì—˜ë¦¬ìŠ¤"},{id:"Evelynn",name:"ì´ë¸”ë¦°"},{id:"Ezreal",name:"ì´ì¦ˆë¦¬ì–¼"},{id:"Fiddlesticks",name:"í”¼ë“¤ìŠ¤í‹±"},{id:"Fiora",name:"í”¼ì˜¤ë¼"},{id:"Fizz",name:"í”¼ì¦ˆ"},{id:"Galio",name:"ê°ˆë¦¬ì˜¤"},{id:"Gangplank",name:"ê°±í”Œë­í¬"},{id:"Garen",name:"ê°€ë Œ"},{id:"Gnar",name:"ë‚˜ë¥´"},{id:"Gragas",name:"ê·¸ë¼ê°€ìŠ¤"},{id:"Graves",name:"ê·¸ë ˆì´ë¸Œì¦ˆ"},{id:"Gwen",name:"ê·¸ì›¬"},{id:"Hecarim",name:"í—¤ì¹´ë¦¼"},{id:"Heimerdinger",name:"í•˜ì´ë¨¸ë”©ê±°"},{id:"Hwei",name:"íì›¨ì´"},{id:"Illaoi",name:"ì¼ë¼ì˜¤ì´"},{id:"Irelia",name:"ì´ë ë¦¬ì•„"},{id:"Ivern",name:"ì•„ì´ë²ˆ"},{id:"Janna",name:"ì”ë‚˜"},{id:"JarvanIV",name:"ìë¥´ë°˜ 4ì„¸"},{id:"Jax",name:"ì­ìŠ¤"},{id:"Jayce",name:"ì œì´ìŠ¤"},{id:"Jhin",name:"ì§„"},{id:"Jinx",name:"ì§•í¬ìŠ¤"},{id:"Kaisa",name:"ì¹´ì´ì‚¬"},{id:"Kalista",name:"ì¹¼ë¦¬ìŠ¤íƒ€"},{id:"Karma",name:"ì¹´ë¥´ë§ˆ"},{id:"Karthus",name:"ì¹´ì„œìŠ¤"},{id:"Kassadin",name:"ì¹´ì‚¬ë”˜"},{id:"Katarina",name:"ì¹´íƒ€ë¦¬ë‚˜"},{id:"Kayle",name:"ì¼€ì¼"},{id:"Kayn",name:"ì¼€ì¸"},{id:"Kennen",name:"ì¼€ë„¨"},{id:"Khazix",name:"ì¹´ì§ìŠ¤"},{id:"Kindred",name:"í‚¨ë“œë ˆë“œ"},{id:"Kled",name:"í´ë ˆë“œ"},{id:"KogMaw",name:"ì½”ê·¸ëª¨"},{id:"KSante",name:"í¬ì‚°í…Œ"},{id:"Leblanc",name:"ë¥´ë¸”ë‘"},{id:"LeeSin",name:"ë¦¬ ì‹ "},{id:"Leona",name:"ë ˆì˜¤ë‚˜"},{id:"Lillia",name:"ë¦´ë¦¬ì•„"},{id:"Lissandra",name:"ë¦¬ì‚°ë“œë¼"},{id:"Lucian",name:"ë£¨ì‹œì•ˆ"},{id:"Lulu",name:"ë£°ë£¨"},{id:"Lux",name:"ëŸ­ìŠ¤"},{id:"Malphite",name:"ë§íŒŒì´íŠ¸"},{id:"Malzahar",name:"ë§ìí•˜"},{id:"Maokai",name:"ë§ˆì˜¤ì¹´ì´"},{id:"MasterYi",name:"ë§ˆìŠ¤í„° ì´"},{id:"Mel",name:"ë©œ"},{id:"Milio",name:"ë°€ë¦¬ì˜¤"},{id:"MissFortune",name:"ë¯¸ìŠ¤ í¬ì¸ˆ"},{id:"MonkeyKing",name:"ì˜¤ê³µ"},{id:"Mordekaiser",name:"ëª¨ë°ì¹´ì´ì €"},{id:"Morgana",name:"ëª¨ë¥´ê°€ë‚˜"},{id:"Naafiri",name:"ë‚˜í”¼ë¦¬"},{id:"Nami",name:"ë‚˜ë¯¸"},{id:"Nasus",name:"ë‚˜ì„œìŠ¤"},{id:"Nautilus",name:"ë…¸í‹¸ëŸ¬ìŠ¤"},{id:"Neeko",name:"ë‹ˆì½”"},{id:"Nidalee",name:"ë‹ˆë‹¬ë¦¬"},{id:"Nilah",name:"ë‹ë¼"},{id:"Nocturne",name:"ë…¹í„´"},{id:"Nunu",name:"ëˆ„ëˆ„ì™€ ìœŒëŸ¼í”„"},{id:"Olaf",name:"ì˜¬ë¼í”„"},{id:"Orianna",name:"ì˜¤ë¦¬ì•„ë‚˜"},{id:"Ornn",name:"ì˜¤ë¥¸"},{id:"Pantheon",name:"íŒí…Œì˜¨"},{id:"Poppy",name:"ë½€ì‚"},{id:"Pyke",name:"íŒŒì´í¬"},{id:"Qiyana",name:"í‚¤ì•„ë‚˜"},{id:"Quinn",name:"í€¸"},{id:"Rakan",name:"ë¼ì¹¸"},{id:"Rammus",name:"ëŒë¨¸ìŠ¤"},{id:"RekSai",name:"ë ‰ì‚¬ì´"},{id:"Rell",name:"ë "},{id:"Renata",name:"ë ˆë‚˜íƒ€ ê¸€ë¼ìŠ¤í¬"},{id:"Renekton",name:"ë ˆë„¥í†¤"},{id:"Rengar",name:"ë ê°€"},{id:"Riven",name:"ë¦¬ë¸"},{id:"Rumble",name:"ëŸ¼ë¸”"},{id:"Ryze",name:"ë¼ì´ì¦ˆ"},{id:"Samira",name:"ì‚¬ë¯¸ë¼"},{id:"Sejuani",name:"ì„¸ì£¼ì•„ë‹ˆ"},{id:"Senna",name:"ì„¸ë‚˜"},{id:"Seraphine",name:"ì„¸ë¼í•€"},{id:"Sett",name:"ì„¸íŠ¸"},{id:"Shaco",name:"ìƒ¤ì½”"},{id:"Shen",name:"ì‰”"},{id:"Shyvana",name:"ì‰¬ë°”ë‚˜"},{id:"Singed",name:"ì‹ ì§€ë“œ"},{id:"Sion",name:"ì‚¬ì´ì˜¨"},{id:"Sivir",name:"ì‹œë¹„ë¥´"},{id:"Skarner",name:"ìŠ¤ì¹´ë„ˆ"},{id:"Smolder",name:"ìŠ¤ëª°ë”"},{id:"Sona",name:"ì†Œë‚˜"},{id:"Soraka",name:"ì†Œë¼ì¹´"},{id:"Swain",name:"ìŠ¤ì›¨ì¸"},{id:"Sylas",name:"ì‚¬ì¼ëŸ¬ìŠ¤"},{id:"Syndra",name:"ì‹ ë“œë¼"},{id:"TahmKench",name:"íƒ ì¼„ì¹˜"},{id:"Taliyah",name:"íƒˆë¦¬ì•¼"},{id:"Talon",name:"íƒˆë¡ "},{id:"Taric",name:"íƒ€ë¦­"},{id:"Teemo",name:"í‹°ëª¨"},{id:"Thresh",name:"ì“°ë ˆì‰¬"},{id:"Tristana",name:"íŠ¸ë¦¬ìŠ¤íƒ€ë‚˜"},{id:"Trundle",name:"íŠ¸ëŸ°ë“¤"},{id:"Tryndamere",name:"íŠ¸ë¦°ë‹¤ë¯¸ì–´"},{id:"TwistedFate",name:"íŠ¸ìœ„ìŠ¤í‹°ë“œ í˜ì´íŠ¸"},{id:"Twitch",name:"íŠ¸ìœ„ì¹˜"},{id:"Udyr",name:"ìš°ë””ë¥´"},{id:"Urgot",name:"ìš°ë¥´ê³³"},{id:"Varus",name:"ë°”ë£¨ìŠ¤"},{id:"Vayne",name:"ë² ì¸"},{id:"Veigar",name:"ë² ì´ê°€"},{id:"Velkoz",name:"ë²¨ì½”ì¦ˆ"},{id:"Vex",name:"ë²¡ìŠ¤"},{id:"Vi",name:"ë°”ì´"},{id:"Viego",name:"ë¹„ì—ê³ "},{id:"Viktor",name:"ë¹…í† ë¥´"},{id:"Vladimir",name:"ë¸”ë¼ë””ë¯¸ë¥´"},{id:"Volibear",name:"ë³¼ë¦¬ë² ì–´"},{id:"Warwick",name:"ì›Œìœ…"},{id:"Xayah",name:"ìì•¼"},{id:"Xerath",name:"ì œë¼ìŠ¤"},{id:"XinZhao",name:"ì‹  ì§œì˜¤"},{id:"Yasuo",name:"ì•¼ìŠ¤ì˜¤"},{id:"Yone",name:"ìš”ë„¤"},{id:"Yorick",name:"ìš”ë¦­"},{id:"Yunara",name:"ìœ ë‚˜ë¼"},{id:"Yuumi",name:"ìœ ë¯¸"},{id:"Zaahen",name:"ìí—¨"},{id:"Zac",name:"ìí¬"},{id:"Zed",name:"ì œë“œ"},{id:"Zeri",name:"ì œë¦¬"},{id:"Ziggs",name:"ì§ìŠ¤"},{id:"Zilean",name:"ì§ˆë¦¬ì–¸"},{id:"Zoe",name:"ì¡°ì´"},{id:"Zyra",name:"ìì´ë¼"}];typeof window<"u"&&(window.championList=be);function Me(){if(!players.length)return alert("í”Œë ˆì´ì–´ ì—†ìŒ");window.open(`https://www.op.gg/multisearch/kr?summoners=${encodeURIComponent(players.map(e=>e.name).join(","))}`,"_blank")}window.openOpggMulti=Me;var h=[];typeof window<"u"&&(window.players=h);let F=[];Object.defineProperty(window,"tempSelectedChamps",{get(){return F},set(e){F=e},configurable:!0});let v=null;function G(e){window.tempSelectedChamps=e}function Pe(e,t=null){const n=document.getElementById("playerModal");if(!n)return console.error("Modal not found");const i=document.getElementById("modalTitle"),o=document.getElementById("duoSelectionArea"),a=document.getElementById("champSelectionArea"),s=document.getElementById("pDuoLink");if(G([]),o&&a&&(e==="edit"&&window.IS_DUO_ACTIVE?(o.style.display="block",a.style.flex="2",s&&(s.innerHTML='<option value="">ì—†ìŒ</option>',h.forEach(r=>{if(r.id!==t){let d=h.find(c=>c.id===t).duoId==r.id?"selected":"";s.innerHTML+=`<option value="${r.id}" ${d}>${r.name}</option>`}}))):(o.style.display="none",a.style.flex="1")),e==="new"){v=null,i&&(i.innerText="ìƒˆ ì°¸ê°€ì ë“±ë¡");const r=document.getElementById("pName");r&&(r.value=""),b()}else{v=t,i&&(i.innerText="ì •ë³´ ìˆ˜ì •");const r=h.find(d=>d.id===t);if(r){const d=(c,l)=>{const f=document.getElementById(c);f&&(f.value=l)};d("pName",r.name),d("pTierCombined",r.baseScore),d("pTargetPos",r.targetPos),d("pSubPos",r.subPos),d("pMainPos",r.mainPos),d("pAvoidPos",r.avoidPos),Array.isArray(r.champ)?tempSelectedChamps=[...r.champ]:tempSelectedChamps=[],b()}}n.style.display="block"}function H(e){const t=document.getElementById(e);t&&(t.classList.remove("show"),t.style.display="")}function b(){const e=document.getElementById("selectedChampPreview");if(e){if(e.innerHTML="",tempSelectedChamps.length===0){e.innerHTML='<span style="color:#666; font-size:0.8rem; line-height:24px;">í´ë¦­í•˜ì—¬ ì„ íƒ...</span>';return}window.tempSelectedChamps.forEach(t=>{const n=document.createElement("img");n.src=`champion_images/${t}.png`,n.className="champ-icon-small",e.appendChild(n)})}}function De(e){if(window.tempSelectedChamps.includes(e))G(window.tempSelectedChamps.filter(t=>t!==e));else{if(window.tempSelectedChamps.length>=10){alert("ìµœëŒ€ 10ëª…ê¹Œì§€ë§Œ ì„ íƒ ê°€ëŠ¥í•©ë‹ˆë‹¤.");return}G([...window.tempSelectedChamps,e])}ge(),he()}function ge(){document.querySelectorAll(".champ-item").forEach(t=>{const n=t.getAttribute("data-id");window.tempSelectedChamps.includes(n)?t.classList.add("selected"):t.classList.remove("selected")})}function he(){const e=document.getElementById("champCountDisplay");e&&(e.innerText=`${window.tempSelectedChamps.length} / 10 ì„ íƒë¨`)}function $e(){H("champModal"),b()}function Be(){const e=document.getElementById("pName");if(!e)return;const t=e.value.trim();if(!t)return alert("ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”");const n=document.getElementById("pTierCombined"),i=parseInt(n.value),o=n.selectedOptions[0].text;let a=null;const s=document.getElementById("pDuoLink");if(v&&window.IS_DUO_ACTIVE&&s){const d=s.value;d&&(a=parseInt(d))}const r={id:v||Date.now(),name:t,baseScore:i,tierName:o,targetPos:document.getElementById("pTargetPos").value,subPos:document.getElementById("pSubPos").value,mainPos:document.getElementById("pMainPos").value,avoidPos:document.getElementById("pAvoidPos").value,champ:[...window.tempSelectedChamps],duoId:a};if(v){const d=h.find(l=>l.id===v);if(d&&d.duoId&&d.duoId!==a){const l=h.find(f=>f.id===d.duoId);l&&(l.duoId=null)}const c=h.findIndex(l=>l.id===v);c!==-1&&(h[c]=r)}else{if(h.length>=10)return alert("ìµœëŒ€ 10ëª…ì…ë‹ˆë‹¤.");h.push(r)}if(a){const d=h.find(c=>c.id===a);if(d){if(d.duoId&&d.duoId!==r.id){const c=h.find(l=>l.id===d.duoId);c&&(c.duoId=null)}d.duoId=r.id}}H("playerModal"),saveAndRender()}function xe(e){confirm("ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&(h=h.filter(t=>t.id!==e),h.forEach(t=>{t.duoId===e&&(t.duoId=null)}),saveAndRender())}function Ge(e){if(!e.duoId)return null;const t=Math.min(e.id,e.duoId);return window.DUO_COLORS?window.DUO_COLORS[t%window.DUO_COLORS.length]:null}function Ue(){return h}window.openModal=Pe;window.closeModal=H;window.renderSelectedChampsPreview=b;window.toggleChampSelection=De;window.updateChampGridSelection=ge;window.updateChampCount=he;window.confirmChampSelect=$e;window.savePlayer=Be;window.removePlayer=xe;window.getDuoColor=Ge;window.getParticipants=Ue;const ke=["TOP","JUG","MID","ADC","SUP"],He={TOP:"íƒ‘",JUG:"ì •ê¸€",MID:"ë¯¸ë“œ",ADC:"ì›ë”œ",SUP:"ì„œí¿",ALL:"ëœë¤",NONE:"ì—†ìŒ"},Ke=["#fd79a8","#00b894","#0984e3","#e17055","#6c5ce7","#fdcb6e"];let je={TOP:1,JUG:1,MID:1,ADC:1,SUP:1};const pe=[{name:"ì•„ì´ì–¸ 4",score:100},{name:"ì•„ì´ì–¸ 3",score:125},{name:"ì•„ì´ì–¸ 2",score:150},{name:"ì•„ì´ì–¸ 1",score:175},{name:"ë¸Œë¡ ì¦ˆ 4",score:300},{name:"ë¸Œë¡ ì¦ˆ 3",score:325},{name:"ë¸Œë¡ ì¦ˆ 2",score:350},{name:"ë¸Œë¡ ì¦ˆ 1",score:375},{name:"ì‹¤ë²„ 4",score:500},{name:"ì‹¤ë²„ 3",score:525},{name:"ì‹¤ë²„ 2",score:550},{name:"ì‹¤ë²„ 1",score:575},{name:"ê³¨ë“œ 4",score:700},{name:"ê³¨ë“œ 3",score:725},{name:"ê³¨ë“œ 2",score:750},{name:"ê³¨ë“œ 1",score:775},{name:"í”Œë˜í‹°ë„˜ 4",score:900},{name:"í”Œë˜í‹°ë„˜ 3",score:925},{name:"í”Œë˜í‹°ë„˜ 2",score:950},{name:"í”Œë˜í‹°ë„˜ 1",score:975},{name:"ì—ë©”ë„ë“œ 4",score:1100},{name:"ì—ë©”ë„ë“œ 3",score:1125},{name:"ì—ë©”ë„ë“œ 2",score:1150},{name:"ì—ë©”ë„ë“œ 1",score:1175},{name:"ë‹¤ì´ì•„ 4",score:1300},{name:"ë‹¤ì´ì•„ 3",score:1325},{name:"ë‹¤ì´ì•„ 2",score:1350},{name:"ë‹¤ì´ì•„ 1",score:1375},{name:"ë§ˆìŠ¤í„°",score:1500},{name:"ê·¸ëœë“œë§ˆìŠ¤í„°",score:1700},{name:"ì±Œë¦°ì €",score:2e3}];function Fe(e){if(!window.championList)return e;const t=window.championList.find(n=>n.id===e);return t?t.name:e}function Ye(){const e=document.getElementById("pName"),t=e?e.value.trim():"";if(!t)return alert("ì´ë¦„ì„ ë¨¼ì € ì…ë ¥í•˜ì„¸ìš”.");const n={n:t,s:parseInt(document.getElementById("pTierCombined").value),t:document.getElementById("pTargetPos").value,u:document.getElementById("pSubPos").value,m:document.getElementById("pMainPos").value,a:document.getElementById("pAvoidPos").value,c:[...tempSelectedChamps]},i=JSON.stringify(n),o=LZString.compressToEncodedURIComponent(i);navigator.clipboard&&window.isSecureContext?navigator.clipboard.writeText(o).then(()=>alert("ì••ì¶•ëœ ê³µìœ  ì½”ë“œê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!")):prompt("ì•„ë˜ ì½”ë“œë¥¼ ë³µì‚¬í•˜ì„¸ìš”:",o)}function Ve(){const e=document.getElementById("importCode"),t=e?e.value.trim():"";if(t)try{const n=LZString.decompressFromEncodedURIComponent(t);if(!n)throw new Error("ì••ì¶• í•´ì œ ì‹¤íŒ¨");const i=JSON.parse(n),o=pe.find(a=>a.score===i.s)||{name:"Unknown"};players.push({id:Date.now(),name:i.n,baseScore:i.s,tierName:o.name,targetPos:i.t,subPos:i.u,mainPos:i.m,avoidPos:i.a,champ:i.c||[]}),e.value="",saveAndRender()}catch(n){console.error(n),alert("ì˜¬ë°”ë¥´ì§€ ì•Šê±°ë‚˜ ì†ìƒëœ ì½”ë“œì…ë‹ˆë‹¤.")}}function qe(){const e=document.getElementById("resultArea");if(!e||e.style.display==="none")return alert("ê²°ê³¼ê°€ ìƒì„±ëœ í›„ì— ìº¡ì²˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");const t=document.getElementById("btnCapture"),n=t.innerText;t.innerText="ğŸ“¸ ìº¡ì²˜ ì¤‘...",t.disabled=!0,html2canvas(e,{backgroundColor:"#121212",scale:2,useCORS:!0,logging:!1}).then(o=>{o.toBlob(a=>{if(!a){alert("ì´ë¯¸ì§€ ìƒì„± ì‹¤íŒ¨"),i();return}try{const s=new ClipboardItem({"image/png":a});navigator.clipboard.write([s]).then(()=>{alert(`âœ… ì´ë¯¸ì§€ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!
ë””ìŠ¤ì½”ë“œ ì…ë ¥ì°½ì— ë¶™ì—¬ë„£ê¸°(Ctrl+V) í•˜ì„¸ìš”.`),i()}).catch(r=>{console.error("í´ë¦½ë³´ë“œ ì“°ê¸° ì‹¤íŒ¨:",r),alert("í´ë¦½ë³´ë“œ ì ‘ê·¼ ê¶Œí•œì´ ì—†ê±°ë‚˜ ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì €ì…ë‹ˆë‹¤."),i()})}catch(s){console.error("ClipboardItem ì˜¤ë¥˜:",s),alert("ì´ ë¸Œë¼ìš°ì €ì—ì„œëŠ” ì´ë¯¸ì§€ ë³µì‚¬ë¥¼ ì§€ì›í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤."),i()}})}).catch(o=>{console.error("html2canvas ì˜¤ë¥˜:",o),alert("ìº¡ì²˜ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."),i()});function i(){t.innerText=n,t.disabled=!1}}function Je(e){const t=new Audio(`sounds/${e}.mp3`);t.volume=.5,t.play()}window.LANES=ke;window.LANE_NAMES=He;window.DUO_COLORS=Ke;window.LANE_WEIGHTS=je;window.TIER_DATA=pe;window.getChampName=Fe;window.generateModalCode=Ye;window.importPlayerCode=Ve;window.copyResultImage=qe;window.playSound=Je;championList!=="undefined"?window.championList=championList:console.warn("championList.jsê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.");window.AI_PROVIDER=localStorage.getItem("ai_provider")||"openai";window.OPENAI_API_KEY=localStorage.getItem("openai_key")||"";window.GEMINI_API_KEY=localStorage.getItem("gemini_key")||"";function ze(){const e=document.getElementById("aiProviderSelect"),t=document.getElementById("openaiKeyInput"),n=document.getElementById("geminiKeyInput");e&&(window.AI_PROVIDER=e.value,localStorage.setItem("ai_provider",e.value)),t&&(window.OPENAI_API_KEY=t.value,localStorage.setItem("openai_key",t.value)),n&&(window.GEMINI_API_KEY=n.value,localStorage.setItem("gemini_key",n.value))}window.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("aiProviderSelect"),t=document.getElementById("openaiKeyInput"),n=document.getElementById("geminiKeyInput");e&&window.AI_PROVIDER&&(e.value=window.AI_PROVIDER),t&&window.OPENAI_API_KEY&&(t.value=window.OPENAI_API_KEY),n&&window.GEMINI_API_KEY&&(n.value=window.GEMINI_API_KEY)});function Ee(){const e="ë‹¹ì‹ ì€ LoL ì „ë¬¸ í•´ì„¤ê°€ì…ë‹ˆë‹¤. ë¶„ì„ì ì´ê³  ìœ„íŠ¸ ìˆê²Œ ê²Œì„ ì–‘ìƒì„ ì˜ˆì¸¡í•´ì£¼ì„¸ìš”.";let t=`[ë¸”ë£¨íŒ€]
`;return LANES.forEach(n=>{const i=lastBlueSlots[n],o=i&&i.champ&&i.champ.length?i.champ.map(a=>getChampName(a)).join(","):"ëª¨ë¦„";t+=`- ${LANE_NAMES[n]}: ${i?i.name:"ë¹„ì–´ìˆìŒ"} (${i?i.tierName:"-"}) [${o}]
`}),t+=`
[ë ˆë“œíŒ€]
`,LANES.forEach(n=>{const i=lastRedSlots[n],o=i&&i.champ&&i.champ.length?i.champ.map(a=>getChampName(a)).join(","):"ëª¨ë¦„";t+=`- ${LANE_NAMES[n]}: ${i?i.name:"ë¹„ì–´ìˆìŒ"} (${i?i.tierName:"-"}) [${o}]
`}),AI_PROVIDER==="gemini"?`${e}

${t}

ë¶„ì„ í•­ëª©: 1.ğŸ”¥ê²©ì „ì§€ 2.âš–ï¸ì–‘ìƒ 3.ğŸ‘‘ìŠ¹ë¦¬í”Œëœ 4.ğŸ™ï¸í•œì¤„í‰`:t+`
í•­ëª©: 1.ğŸ”¥ê²©ì „ì§€ 2.âš–ï¸ì–‘ìƒ 3.ğŸ‘‘ìŠ¹ë¦¬í”Œëœ 4.ğŸ™ï¸í•œì¤„í‰`}async function we(e,t){const i=await(await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"system",content:"ë‹¹ì‹ ì€ LoL ì „ë¬¸ í•´ì„¤ê°€ì…ë‹ˆë‹¤."},{role:"user",content:t}],max_tokens:600})})).json();if(i.error)throw new Error(i.error.message);return i.choices[0].message.content}async function ye(e,t){const n=`https://generativelanguage.googleapis.com/v1beta/models/gemini-3-flash-preview:generateContent?key=${e}`,a=await(await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{role:"user",parts:[{text:t}]}]})})).json();if(a.response&&a.response.candidates&&a.response.candidates[0]?.content?.parts[0]?.text)return a.response.candidates[0].content.parts[0].text;if(a.candidates&&a.candidates[0]?.content?.parts[0]?.text)return a.candidates[0].content.parts[0].text;if(a.text)return a.text;if(a.error)throw new Error(a.error.message);return"ë¶„ì„ ì‹¤íŒ¨"}async function We(){if(!lastBlueSlots||!lastRedSlots)return alert("ë¨¼ì € íŒ€ ë°°ì •ì„ ì™„ë£Œí•´ì£¼ì„¸ìš”.");const e=AI_PROVIDER==="gemini"?GEMINI_API_KEY:OPENAI_API_KEY;if(!e){alert("API Keyê°€ ì—†ìŠµë‹ˆë‹¤. ì„¤ì •ì—ì„œ ì…ë ¥í•´ì£¼ì„¸ìš”."),openSettings();return}document.getElementById("aiModal");const t=document.getElementById("aiLoading"),n=document.getElementById("aiResultContent");showModal("aiModal"),t.style.display="block",n.style.display="none",n.innerHTML="";const i=Ee();try{let o="";AI_PROVIDER==="gemini"?o=await ye(e,i):o=await we(e,i),t.style.display="none",n.style.display="block",n.innerHTML=marked.parse(o)}catch(o){t.style.display="none",n.style.display="block",n.innerHTML=`<p style="color: #e74c3c;">âš ï¸ ì˜¤ë¥˜: ${o.message}</p>`;let a=`[AI ë¶„ì„ ì˜ˆì™¸ ë°œìƒ!]
ì—ëŸ¬: `+(o&&o.message?o.message:o)+`
`+(o&&o.stack?"ìŠ¤íƒ: "+o.stack+`
`:"")+"AI_PROVIDER: "+(typeof AI_PROVIDER<"u"?AI_PROVIDER:"undefined")+`
API Key: `+(e?e.slice(0,6)+"...":"ì—†ìŒ")+`
Prompt: `+(i?i.slice(0,120)+(i.length>120?"...":""):"ì—†ìŒ");alert(a)}}function Ze(e){const t=document.getElementById("openaiKeyArea"),n=document.getElementById("geminiKeyArea");e==="openai"?(t&&(t.style.display=""),n&&(n.style.display="none")):e==="gemini"&&(t&&(t.style.display="none"),n&&(n.style.display=""))}window.analyzeGameAI=We;window.createAiPrompt=Ee;window.fetchOpenAIResponse=we;window.fetchGeminiResponse=ye;window.saveApiKeys=ze;window.toggleAiInput=Ze;function Xe(){if(players.length===0)return alert("ì €ì¥í•  í”Œë ˆì´ì–´ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.");const e={version:"v21.0",timestamp:new Date().toISOString(),players},t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),i=URL.createObjectURL(n),o=document.createElement("a"),a=new Date,s=`lol_cw_${a.getFullYear()}${(a.getMonth()+1).toString().padStart(2,"0")}${a.getDate().toString().padStart(2,"0")}_${a.getHours()}${a.getMinutes()}.json`;o.href=i,o.download=s,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i)}function Qe(e){const t=e.files[0];if(!t)return;const n=new FileReader;n.onload=function(i){try{const o=i.target.result,a=JSON.parse(o);a.players&&Array.isArray(a.players)?(confirm("í˜„ì¬ ë¦¬ìŠ¤íŠ¸ë¥¼ ì§€ìš°ê³  ë¶ˆëŸ¬ì˜¨ íŒŒì¼ë¡œ ëŒ€ì²´í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")?players=a.players:players=[...players,...a.players],saveAndRender(),alert(`ì„±ê³µì ìœ¼ë¡œ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤! (${a.players.length}ëª…)`)):alert("ì˜¬ë°”ë¥´ì§€ ì•Šì€ ë¡œìŠ¤í„° íŒŒì¼ í˜•ì‹ì…ë‹ˆë‹¤.")}catch(o){console.error(o),alert("íŒŒì¼ì„ ì½ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}},n.readAsText(t),e.value=""}window.saveRosterToFile=Xe;window.handleFileLoad=Qe;let Ie=null,ve=null;function et(){if(window.players.length<2)return alert("ìµœì†Œ 2ëª…");let e={},t={};window.LANES.forEach(c=>{e[c]=null,t[c]=null});let n=[],i=[],a=[...[...window.players].sort((c,l)=>l.baseScore-c.baseScore||c.name.localeCompare(l.name))];a=T(a,"1ST",e,t,n,i,1),a=x(a,.9),a=T(a,"2ND",e,t,n,i,.9),a=x(a,.95),a=T(a,"MAIN",e,t,n,i,.95),a=x(a,.7),a.forEach(c=>{if(Ae(c.id,e,t))return;let l=[],f=Math.round(c.baseScore*.7);if(n.length<5&&q(e,"BLUE",l,f,t,c.avoidPos),i.length<5&&q(t,"RED",l,f,e,c.avoidPos),l.sort((u,m)=>u.gap-m.gap),l.length>0){let u=l[0],m=u.team==="BLUE"?e:t,g=u.team==="BLUE"?n:i;S(m,g,u.lane,c,"AUTO",.7)&&window.IS_DUO_ACTIVE&&U(c,m,g,e,t)}else Ce(c,e,t,n,i)}),Ie=e,ve=t,V(e),V(t),tt(e,t),k("blueList","blueScoreDisp",e,"BLUE"),k("redList","redScoreDisp",t,"RED");const s=document.getElementById("resultArea");s&&(s.style.display="flex",setTimeout(()=>s.scrollIntoView({behavior:"smooth"}),100));const r=document.getElementById("shareSection");r&&(r.style.display="flex");const d=document.getElementById("aiAnalyzeSection");d&&(d.style.display="flex")}function U(e,t,n,i,o){if(!window.IS_DUO_ACTIVE||!e.duoId)return!1;const a=window.players.find(s=>s.id===e.duoId);return!a||Ae(a.id,i,o)||n.length>=5?!1:M(t,a.targetPos,a.avoidPos)?(S(t,n,a.targetPos,a,"DUO",1),!0):M(t,a.subPos,a.avoidPos)?(S(t,n,a.subPos,a,"DUO",.95),!0):!1}function Ae(e,t,n,i=null){if(i)return Object.values(i).some(a=>a&&a.id===e);let o=!1;return t&&(o=o||Object.values(t).some(a=>a&&a.id===e)),n&&(o=o||Object.values(n).some(a=>a&&a.id===e)),o}function x(e,t){return e.map(n=>({...n,tempScore:Math.round(n.baseScore*t)})).sort((n,i)=>i.tempScore-n.tempScore||n.name.localeCompare(i.name))}function T(e,t,n,i,o,a,s){let r=[],d=new Set;return[n,i].forEach(c=>{Object.values(c).forEach(l=>{l&&d.add(l.id)})}),e.forEach(c=>{if(d.has(c.id))return;let l=!1,f=null,u=t;if(t==="1ST"?c.targetPos!=="ALL"?(l=!0,f=c.targetPos):(l=!0,f="ALL",u="1ST_RAND"):t==="2ND"?c.subPos!=="ALL"?(l=!0,f=c.subPos):(l=!0,f="ALL",u="2ND_RAND"):t==="MAIN"&&c.mainPos!=="ALL"&&(l=!0,f=c.mainPos),!l){r.push(c);return}let m=!1,g=Y(o),E=Y(a),I;o.length<a.length?I=!0:a.length<o.length?I=!1:I=g<=E;let D=I?n:i,j=I?o:a,$=I?i:n,B=I?a:o;M(D,f,c.avoidPos)?(S(D,j,f,c,u,s),m=!0,d.add(c.id),U(c,D,j,n,i)&&c.duoId&&d.add(c.duoId)):B.length<5&&M($,f,c.avoidPos)&&(S($,B,f,c,u,s),m=!0,d.add(c.id),U(c,$,B,n,i)&&c.duoId&&d.add(c.duoId)),m||r.push(c)}),r.filter(c=>!d.has(c.id))}function Y(e){return e.reduce((t,n)=>t+n.finalScore*(window.LANE_WEIGHTS[n.assignedLane]||1),0)}function Ce(e,t,n,i,o){let a=i.length<5?i:o,s=i.length<5?t:n,r=window.LANES.find(d=>s[d]===null);!r&&i.length<5&&(a=a===i?o:i,s=s===t?n:t,r=window.LANES.find(d=>s[d]===null)),r&&S(s,a,r,e,"FORCE",.5)}function M(e,t,n){return t==="ALL"?window.LANES.some(i=>e[i]===null&&i!==n):t===n?!1:e[t]===null}function S(e,t,n,i,o,a){let s=n;return(n==="ALL"||o.includes("RAND")||o==="AUTO"||o==="FORCE")&&(s=window.LANES.find(r=>e[r]===null&&(o==="FORCE"?!0:r!==i.avoidPos))),s?(i.finalScore=Math.round(i.baseScore*a),i.isUnderdog=!1,i.isAce=!1,e[s]={...i,assignType:o,assignedLane:s},t.push(i),!0):!1}function V(e){let t=null,n=-1;window.LANES.forEach(i=>{const o=e[i];o&&["1ST","1ST_RAND","2ND","2ND_RAND","MAIN"].includes(o.assignType)&&o.mainPos===o.assignedLane&&o.finalScore>n&&(n=o.finalScore,t=o)}),t&&(t.isAce=!0)}function q(e,t,n,i,o,a){window.LANES.forEach(s=>{if(e[s]===null&&(a==="IGNORE"||s!==a)){let r=o[s],d=5e3;r&&(d=Math.abs(i-r.finalScore)),n.push({team:t,lane:s,gap:d})}})}function tt(e,t){window.LANES.forEach(n=>{const i=e[n],o=t[n];i&&o&&Math.abs(i.finalScore-o.finalScore)>=350&&(i.finalScore<o.finalScore?i.isUnderdog=!0:o.isUnderdog=!0)})}function k(e,t,n,i){const o=document.getElementById(e);let a=0;o.innerHTML="",window.LANES.forEach(s=>{const r=n[s];let d=`<div class="role-row" draggable="true" ondragstart="handleDragStart(event,'${i}','${s}')" ondragend="handleDragEnd(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" ondrop="handleDrop(event,'${i}')" onclick="this.classList.toggle('active')">`;if(r){a+=r.finalScore*window.LANE_WEIGHTS[s];let c="";window.IS_DUO_ACTIVE&&r.duoId&&Object.values(n).some(f=>f&&f.id===r.duoId)?c=`<span class="pref-badge" style="background:${window.getDuoColor?window.getDuoColor(r):""}">ğŸ”— ë“€ì˜¤</span>`:c=`<span class="pref-badge pref-${r.assignType.toLowerCase().split("_")[0]}">${r.assignType}</span>`,r.isAce&&(c+=' <span class="ace-badge">ğŸ‘‘ ACE</span>'),r.isUnderdog&&(c+=' <span class="pref-badge gap-warning">âš ï¸ ì—´ì„¸</span>');let l="";r.champ?.length&&(l='<div class="result-champ-container">',r.champ.slice(0,10).forEach(f=>l+=`<img src="champion_images/${f}.png" class="result-champ-icon" title="${window.getChampName?window.getChampName(f):f}">`),l+="</div>"),d+=`<div class="role-icon lane-${s.toLowerCase()}"><div>${window.LANE_NAMES[s]}</div></div><div class="player-detail-col"><span class="player-name">${r.name} ${c}</span><div style="font-size:0.8rem; color:#888;">${r.tierName} (${window.LANE_NAMES[r.targetPos]})</div>${l}</div></div>`}else d+=`<div class="role-icon lane-${s.toLowerCase()}"><div>${window.LANE_NAMES[s]}</div></div><div style="flex:1;">(ë¹„ì–´ìˆìŒ)</div></div>`;o.innerHTML+=d})}window.calculateAndAssign=et;window.renderTR=k;window.attemptAssign=T;window.forceAssign=Ce;window.lastBlueSlots=Ie;window.lastRedSlots=ve;var J;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(J||(J={}));var z;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(z||(z={}));var W;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(W||(W={}));const Z=["user","model","function","system"];var X;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(X||(X={}));var Q;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(Q||(Q={}));var ee;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(ee||(ee={}));var te;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(te||(te={}));var _;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(_||(_={}));var ne;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(ne||(ne={}));var ie;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(ie||(ie={}));var oe;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(oe||(oe={}));class p extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class C extends p{constructor(t,n){super(t),this.response=n}}class Se extends p{constructor(t,n,i,o){super(t),this.status=n,this.statusText=i,this.errorDetails=o}}class y extends p{}class _e extends p{}const nt="https://generativelanguage.googleapis.com",it="v1beta",ot="0.24.1",at="genai-js";var A;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(A||(A={}));class st{constructor(t,n,i,o,a){this.model=t,this.task=n,this.apiKey=i,this.stream=o,this.requestOptions=a}toString(){var t,n;const i=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||it;let a=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||nt}/${i}/${this.model}:${this.task}`;return this.stream&&(a+="?alt=sse"),a}}function rt(e){const t=[];return e?.apiClient&&t.push(e.apiClient),t.push(`${at}/${ot}`),t.join(" ")}async function dt(e){var t;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",rt(e.requestOptions)),n.append("x-goog-api-key",e.apiKey);let i=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(i){if(!(i instanceof Headers))try{i=new Headers(i)}catch(o){throw new y(`unable to convert customHeaders value ${JSON.stringify(i)} to Headers: ${o.message}`)}for(const[o,a]of i.entries()){if(o==="x-goog-api-key")throw new y(`Cannot set reserved header name ${o}`);if(o==="x-goog-api-client")throw new y(`Header name ${o} can only be set using the apiClient field`);n.append(o,a)}}return n}async function ct(e,t,n,i,o,a){const s=new st(e,t,n,i,a);return{url:s.toString(),fetchOptions:Object.assign(Object.assign({},ft(a)),{method:"POST",headers:await dt(s),body:o})}}async function R(e,t,n,i,o,a={},s=fetch){const{url:r,fetchOptions:d}=await ct(e,t,n,i,o,a);return lt(r,d,s)}async function lt(e,t,n=fetch){let i;try{i=await n(e,t)}catch(o){ut(o,e)}return i.ok||await mt(i,e),i}function ut(e,t){let n=e;throw n.name==="AbortError"?(n=new _e(`Request aborted when fetching ${t.toString()}: ${e.message}`),n.stack=e.stack):e instanceof Se||e instanceof y||(n=new p(`Error fetching from ${t.toString()}: ${e.message}`),n.stack=e.stack),n}async function mt(e,t){let n="",i;try{const o=await e.json();n=o.error.message,o.error.details&&(n+=` ${JSON.stringify(o.error.details)}`,i=o.error.details)}catch{}throw new Se(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${n}`,e.status,e.statusText,i)}function ft(e){const t={};if(e?.signal!==void 0||e?.timeout>=0){const n=new AbortController;e?.timeout>=0&&setTimeout(()=>n.abort(),e.timeout),e?.signal&&e.signal.addEventListener("abort",()=>{n.abort()}),t.signal=n.signal}return t}function K(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),L(e.candidates[0]))throw new C(`${w(e)}`,e);return gt(e)}else if(e.promptFeedback)throw new C(`Text not available. ${w(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),L(e.candidates[0]))throw new C(`${w(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),ae(e)[0]}else if(e.promptFeedback)throw new C(`Function call not available. ${w(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),L(e.candidates[0]))throw new C(`${w(e)}`,e);return ae(e)}else if(e.promptFeedback)throw new C(`Function call not available. ${w(e)}`,e)},e}function gt(e){var t,n,i,o;const a=[];if(!((n=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||n===void 0)&&n.parts)for(const s of(o=(i=e.candidates)===null||i===void 0?void 0:i[0].content)===null||o===void 0?void 0:o.parts)s.text&&a.push(s.text),s.executableCode&&a.push("\n```"+s.executableCode.language+`
`+s.executableCode.code+"\n```\n"),s.codeExecutionResult&&a.push("\n```\n"+s.codeExecutionResult.output+"\n```\n");return a.length>0?a.join(""):""}function ae(e){var t,n,i,o;const a=[];if(!((n=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||n===void 0)&&n.parts)for(const s of(o=(i=e.candidates)===null||i===void 0?void 0:i[0].content)===null||o===void 0?void 0:o.parts)s.functionCall&&a.push(s.functionCall);if(a.length>0)return a}const ht=[_.RECITATION,_.SAFETY,_.LANGUAGE];function L(e){return!!e.finishReason&&ht.includes(e.finishReason)}function w(e){var t,n,i;let o="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)o+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(o+=` due to ${e.promptFeedback.blockReason}`),!((n=e.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(o+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((i=e.candidates)===null||i===void 0)&&i[0]){const a=e.candidates[0];L(a)&&(o+=`Candidate was blocked due to ${a.finishReason}`,a.finishMessage&&(o+=`: ${a.finishMessage}`))}return o}function O(e){return this instanceof O?(this.v=e,this):new O(e)}function pt(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),o,a=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(u){i[u]&&(o[u]=function(m){return new Promise(function(g,E){a.push([u,m,g,E])>1||r(u,m)})})}function r(u,m){try{d(i[u](m))}catch(g){f(a[0][3],g)}}function d(u){u.value instanceof O?Promise.resolve(u.value.v).then(c,l):f(a[0][2],u)}function c(u){r("next",u)}function l(u){r("throw",u)}function f(u,m){u(m),a.shift(),a.length&&r(a[0][0],a[0][1])}}const se=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Et(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=It(t),[i,o]=n.tee();return{stream:yt(i),response:wt(o)}}async function wt(e){const t=[],n=e.getReader();for(;;){const{done:i,value:o}=await n.read();if(i)return K(vt(t));t.push(o)}}function yt(e){return pt(this,arguments,function*(){const n=e.getReader();for(;;){const{value:i,done:o}=yield O(n.read());if(o)break;yield yield O(K(i))}})}function It(e){const t=e.getReader();return new ReadableStream({start(i){let o="";return a();function a(){return t.read().then(({value:s,done:r})=>{if(r){if(o.trim()){i.error(new p("Failed to parse stream"));return}i.close();return}o+=s;let d=o.match(se),c;for(;d;){try{c=JSON.parse(d[1])}catch{i.error(new p(`Error parsing JSON response: "${d[1]}"`));return}i.enqueue(c),o=o.substring(d[0].length),d=o.match(se)}return a()}).catch(s=>{let r=s;throw r.stack=s.stack,r.name==="AbortError"?r=new _e("Request aborted when reading from the stream"):r=new p("Error reading from the stream"),r})}}})}function vt(e){const t=e[e.length-1],n={promptFeedback:t?.promptFeedback};for(const i of e){if(i.candidates){let o=0;for(const a of i.candidates)if(n.candidates||(n.candidates=[]),n.candidates[o]||(n.candidates[o]={index:o}),n.candidates[o].citationMetadata=a.citationMetadata,n.candidates[o].groundingMetadata=a.groundingMetadata,n.candidates[o].finishReason=a.finishReason,n.candidates[o].finishMessage=a.finishMessage,n.candidates[o].safetyRatings=a.safetyRatings,a.content&&a.content.parts){n.candidates[o].content||(n.candidates[o].content={role:a.content.role||"user",parts:[]});const s={};for(const r of a.content.parts)r.text&&(s.text=r.text),r.functionCall&&(s.functionCall=r.functionCall),r.executableCode&&(s.executableCode=r.executableCode),r.codeExecutionResult&&(s.codeExecutionResult=r.codeExecutionResult),Object.keys(s).length===0&&(s.text=""),n.candidates[o].content.parts.push(s)}o++}i.usageMetadata&&(n.usageMetadata=i.usageMetadata)}return n}async function Oe(e,t,n,i){const o=await R(t,A.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(n),i);return Et(o)}async function Ne(e,t,n,i){const a=await(await R(t,A.GENERATE_CONTENT,e,!1,JSON.stringify(n),i)).json();return{response:K(a)}}function Re(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function N(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const n of e)typeof n=="string"?t.push({text:n}):t.push(n);return At(t)}function At(e){const t={role:"user",parts:[]},n={role:"function",parts:[]};let i=!1,o=!1;for(const a of e)"functionResponse"in a?(n.parts.push(a),o=!0):(t.parts.push(a),i=!0);if(i&&o)throw new p("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!i&&!o)throw new p("No content is provided for sending chat message.");return i?t:n}function Ct(e,t){var n;let i={model:t?.model,generationConfig:t?.generationConfig,safetySettings:t?.safetySettings,tools:t?.tools,toolConfig:t?.toolConfig,systemInstruction:t?.systemInstruction,cachedContent:(n=t?.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const o=e.generateContentRequest!=null;if(e.contents){if(o)throw new y("CountTokensRequest must have one of contents or generateContentRequest, not both.");i.contents=e.contents}else if(o)i=Object.assign(Object.assign({},i),e.generateContentRequest);else{const a=N(e);i.contents=[a]}return{generateContentRequest:i}}function re(e){let t;return e.contents?t=e:t={contents:[N(e)]},e.systemInstruction&&(t.systemInstruction=Re(e.systemInstruction)),t}function St(e){return typeof e=="string"||Array.isArray(e)?{content:N(e)}:e}const de=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],_t={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Ot(e){let t=!1;for(const n of e){const{role:i,parts:o}=n;if(!t&&i!=="user")throw new p(`First content should be with role 'user', got ${i}`);if(!Z.includes(i))throw new p(`Each item should include role field. Got ${i} but valid roles are: ${JSON.stringify(Z)}`);if(!Array.isArray(o))throw new p("Content should have 'parts' property with an array of Parts");if(o.length===0)throw new p("Each Content should have at least one part");const a={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const r of o)for(const d of de)d in r&&(a[d]+=1);const s=_t[i];for(const r of de)if(!s.includes(r)&&a[r]>0)throw new p(`Content with role '${i}' can't contain '${r}' part`);t=!0}}function ce(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const i of n.parts)if(i===void 0||Object.keys(i).length===0||i.text!==void 0&&i.text==="")return!1;return!0}const le="SILENT_ERROR";class Nt{constructor(t,n,i,o={}){this.model=n,this.params=i,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,i?.history&&(Ot(i.history),this._history=i.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,n={}){var i,o,a,s,r,d;await this._sendPromise;const c=N(t),l={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(s=this.params)===null||s===void 0?void 0:s.toolConfig,systemInstruction:(r=this.params)===null||r===void 0?void 0:r.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,c]},f=Object.assign(Object.assign({},this._requestOptions),n);let u;return this._sendPromise=this._sendPromise.then(()=>Ne(this._apiKey,this.model,l,f)).then(m=>{var g;if(ce(m.response)){this._history.push(c);const E=Object.assign({parts:[],role:"model"},(g=m.response.candidates)===null||g===void 0?void 0:g[0].content);this._history.push(E)}else{const E=w(m.response);E&&console.warn(`sendMessage() was unsuccessful. ${E}. Inspect response object for details.`)}u=m}).catch(m=>{throw this._sendPromise=Promise.resolve(),m}),await this._sendPromise,u}async sendMessageStream(t,n={}){var i,o,a,s,r,d;await this._sendPromise;const c=N(t),l={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(s=this.params)===null||s===void 0?void 0:s.toolConfig,systemInstruction:(r=this.params)===null||r===void 0?void 0:r.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,c]},f=Object.assign(Object.assign({},this._requestOptions),n),u=Oe(this._apiKey,this.model,l,f);return this._sendPromise=this._sendPromise.then(()=>u).catch(m=>{throw new Error(le)}).then(m=>m.response).then(m=>{if(ce(m)){this._history.push(c);const g=Object.assign({},m.candidates[0].content);g.role||(g.role="model"),this._history.push(g)}else{const g=w(m);g&&console.warn(`sendMessageStream() was unsuccessful. ${g}. Inspect response object for details.`)}}).catch(m=>{m.message!==le&&console.error(m)}),u}}async function Rt(e,t,n,i){return(await R(t,A.COUNT_TOKENS,e,!1,JSON.stringify(n),i)).json()}async function Tt(e,t,n,i){return(await R(t,A.EMBED_CONTENT,e,!1,JSON.stringify(n),i)).json()}async function Lt(e,t,n,i){const o=n.requests.map(s=>Object.assign(Object.assign({},s),{model:t}));return(await R(t,A.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:o}),i)).json()}class ue{constructor(t,n,i={}){this.apiKey=t,this._requestOptions=i,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=Re(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(t,n={}){var i;const o=re(t),a=Object.assign(Object.assign({},this._requestOptions),n);return Ne(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},o),a)}async generateContentStream(t,n={}){var i;const o=re(t),a=Object.assign(Object.assign({},this._requestOptions),n);return Oe(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},o),a)}startChat(t){var n;return new Nt(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},t),this._requestOptions)}async countTokens(t,n={}){const i=Ct(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),o=Object.assign(Object.assign({},this._requestOptions),n);return Rt(this.apiKey,this.model,i,o)}async embedContent(t,n={}){const i=St(t),o=Object.assign(Object.assign({},this._requestOptions),n);return Tt(this.apiKey,this.model,i,o)}async batchEmbedContents(t,n={}){const i=Object.assign(Object.assign({},this._requestOptions),n);return Lt(this.apiKey,this.model,t,i)}}class bt{constructor(t){this.apiKey=t}getGenerativeModel(t,n){if(!t.model)throw new p("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new ue(this.apiKey,t,n)}getGenerativeModelFromCachedContent(t,n,i){if(!t.name)throw new y("Cached content must contain a `name` field.");if(!t.model)throw new y("Cached content must contain a `model` field.");const o=["model","systemInstruction"];for(const s of o)if(n?.[s]&&t[s]&&n?.[s]!==t[s]){if(s==="model"){const r=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,d=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(r===d)continue}throw new y(`Different value for "${s}" specified in modelParams (${n[s]}) and cachedContent (${t[s]})`)}const a=Object.assign(Object.assign({},n),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new ue(this.apiKey,a,i)}}const me=window.GEMINI_API_KEY||"",Te="gemini-3-flash-preview";let P=null;me&&(P=new bt(me));async function Mt(e,t={}){if(!P)throw new Error("Gemini API í‚¤ê°€ ì—†ìŠµë‹ˆë‹¤.");return(await P.getGenerativeModel({model:Te}).generateContent({contents:e,...t})).response.text()}window.gemini={chat:Mt,getGenAI:()=>P,model:Te};document.addEventListener("DOMContentLoaded",()=>{const t=new URLSearchParams(window.location.search).get("d");t?decodeData(t)?(console.log("URLì—ì„œ ë°ì´í„°ë¥¼ ë³µì›í–ˆìŠµë‹ˆë‹¤."),window.history.replaceState({},document.title,window.location.pathname),setTimeout(calculateAndAssign,500)):(alert("ê³µìœ ëœ ë§í¬ì˜ ë°ì´í„°ê°€ ì†ìƒë˜ì—ˆê±°ë‚˜ í˜¸í™˜ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤."),fe()):fe(),Pt(),Dt(),Le()});function Pt(){const e=document.getElementById("pTierCombined");e&&(e.innerHTML="",TIER_DATA.forEach(a=>{let s=document.createElement("option");s.value=a.score,s.text=a.name,a.name==="ê³¨ë“œ 4"&&(s.selected=!0),e.appendChild(s)}));const t=LANES.map(a=>({v:a,n:LANE_NAMES[a]}));t.push({v:"ALL",n:"ğŸ² ëœë¤"}),["pTargetPos","pSubPos","pMainPos"].forEach(a=>{const s=document.getElementById(a);s&&(s.innerHTML="",t.forEach(r=>s.innerHTML+=`<option value="${r.v}">${r.n}</option>`))});const n=[{v:"NONE",n:"ì—†ìŒ"},...LANES.map(a=>({v:a,n:LANE_NAMES[a]}))],i=document.getElementById("pAvoidPos");i&&(i.innerHTML="",n.forEach(a=>i.innerHTML+=`<option value="${a.v}">${a.n}</option>`));const o=document.getElementById("weightInputs");o&&(o.innerHTML="",LANES.forEach(a=>{o.innerHTML+=`
            <div class="slider-row">
                <label>${LANE_NAMES[a]}</label>
                <input type="range" min="0.5" max="1.5" step="0.1" value="1.0" oninput="updateWeight('${a}', this.value)">
                <span id="wVal_${a}" class="slider-val">1.0</span>
            </div>`}))}function Dt(){const e=document.getElementById("champGrid");e&&(e.innerHTML="",window.championList.forEach(t=>{const n=document.createElement("div");n.className="champ-item",n.setAttribute("data-id",t.id),n.setAttribute("data-name",t.name),n.onclick=()=>toggleChampSelection(t.id),n.innerHTML=`
            <img src="champion_images/${t.id}.png" alt="${t.name}">
            <span>${t.name}</span>
        `,e.appendChild(n)}))}function $t(){const e=document.getElementById("settingsModal");e&&(e.style.display="block");const t=document.getElementById("aiProviderSelect");t&&window.toggleAiInput(t.value)}window.openSettings=$t;function Bt(){const e=document.getElementById("champModal");if(e){e.style.display="block";const t=document.getElementById("champSearch");t&&(t.value=""),xt(),updateChampGridSelection(),updateChampCount()}}window.openChampModal=Bt;function xt(){const e=document.getElementById("champSearch");if(!e)return;const t=e.value.toLowerCase();document.querySelectorAll(".champ-item").forEach(i=>{(i.getAttribute("data-name")||"").includes(t)?i.style.display="flex":i.style.display="none"})}function Le(){const e=document.getElementById("playerList");if(!e)return;const t=document.getElementById("playerCount");t&&(t.innerText=`${players.length} / 10 ëª…`),e.innerHTML="",players.forEach(n=>{let i="";if(n.duoId){const s=players.find(r=>r.id===n.duoId);s&&(i=`<span class="badge duo" style="background:${getDuoColor(n)}">ğŸ”— ${s.name}</span>`)}const o=n.avoidPos!=="NONE"?`<span class="badge avoid">ğŸš« ${LANE_NAMES[n.avoidPos]}</span>`:"";let a="";Array.isArray(n.champ)&&n.champ.length>0&&(a='<div class="champ-preview-list">',n.champ.forEach(s=>{a+=`<img src="champion_images/${s}.png" class="champ-icon-small">`}),a+="</div>"),e.innerHTML+=`
        <div class="player-card">
            <div class="player-info" onclick="openModal('edit', ${n.id})">
                <span class="player-name">${n.name}</span>
                <div class="badges">
                    <span class="badge tier">${n.tierName}</span>
                    <span class="badge" style="background:#27ae60">1: ${LANE_NAMES[n.targetPos]}</span>
                    ${o} ${i}
                </div>
                ${a}
            </div>
            <button class="btn-del" onclick="removePlayer(${n.id})">Ã—</button>
        </div>`})}function fe(){const e=localStorage.getItem("lol_cw_v20_8");e&&(players=JSON.parse(e),Le())}
