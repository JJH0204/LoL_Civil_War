(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Te(){if(!players.length)return alert("í”Œë ˆì´ì–´ ì—†ìŒ");window.open(`https://www.op.gg/multisearch/kr?summoners=${encodeURIComponent(players.map(e=>e.name).join(","))}`,"_blank")}window.openOpggMulti=Te;let p=[],A=null,E=[];function be(e,t=null){const n=document.getElementById("playerModal");if(!n)return console.error("Modal not found");const o=document.getElementById("modalTitle"),s=document.getElementById("duoSelectionArea"),i=document.getElementById("champSelectionArea"),a=document.getElementById("pDuoLink");if(E=[],s&&i&&(e==="edit"&&window.IS_DUO_ACTIVE?(s.style.display="block",i.style.flex="2",a&&(a.innerHTML='<option value="">ì—†ìŒ</option>',p.forEach(r=>{if(r.id!==t){let c=p.find(l=>l.id===t).duoId==r.id?"selected":"";a.innerHTML+=`<option value="${r.id}" ${c}>${r.name}</option>`}}))):(s.style.display="none",i.style.flex="1")),e==="new"){A=null,o&&(o.innerText="ìƒˆ ì°¸ê°€ì ë“±ë¡");const r=document.getElementById("pName");r&&(r.value=""),M()}else{A=t,o&&(o.innerText="ì •ë³´ ìˆ˜ì •");const r=p.find(c=>c.id===t);if(r){const c=(l,d)=>{const g=document.getElementById(l);g&&(g.value=d)};c("pName",r.name),c("pTierCombined",r.baseScore),c("pTargetPos",r.targetPos),c("pSubPos",r.subPos),c("pMainPos",r.mainPos),c("pAvoidPos",r.avoidPos),Array.isArray(r.champ)?E=[...r.champ]:E=[],M()}}n.style.display="block"}function j(e){const t=document.getElementById(e);t&&(t.classList.remove("show"),t.style.display="")}function M(){const e=document.getElementById("selectedChampPreview");if(e){if(e.innerHTML="",E.length===0){e.innerHTML='<span style="color:#666; font-size:0.8rem; line-height:24px;">í´ë¦­í•˜ì—¬ ì„ íƒ...</span>';return}E.forEach(t=>{const n=document.createElement("img");n.src=`champion_images/${t}.png`,n.className="champ-icon-small",e.appendChild(n)})}}function Me(e){if(E.includes(e))E=E.filter(t=>t!==e);else{if(E.length>=10){alert("ìµœëŒ€ 10ëª…ê¹Œì§€ë§Œ ì„ íƒ ê°€ëŠ¥í•©ë‹ˆë‹¤.");return}E.push(e)}ge(),me()}function ge(){document.querySelectorAll(".champ-item").forEach(t=>{const n=t.getAttribute("data-id");E.includes(n)?t.classList.add("selected"):t.classList.remove("selected")})}function me(){const e=document.getElementById("champCountDisplay");e&&(e.innerText=`${E.length} / 10 ì„ íƒë¨`)}function Pe(){j("champModal"),M()}function De(){const e=document.getElementById("pName");if(!e)return;const t=e.value.trim();if(!t)return alert("ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”");const n=document.getElementById("pTierCombined"),o=parseInt(n.value),s=n.selectedOptions[0].text;let i=null;const a=document.getElementById("pDuoLink");if(A&&window.IS_DUO_ACTIVE&&a){const c=a.value;c&&(i=parseInt(c))}const r={id:A||Date.now(),name:t,baseScore:o,tierName:s,targetPos:document.getElementById("pTargetPos").value,subPos:document.getElementById("pSubPos").value,mainPos:document.getElementById("pMainPos").value,avoidPos:document.getElementById("pAvoidPos").value,champ:[...E],duoId:i};if(A){const c=p.find(d=>d.id===A);if(c&&c.duoId&&c.duoId!==i){const d=p.find(g=>g.id===c.duoId);d&&(d.duoId=null)}const l=p.findIndex(d=>d.id===A);l!==-1&&(p[l]=r)}else{if(p.length>=10)return alert("ìµœëŒ€ 10ëª…ì…ë‹ˆë‹¤.");p.push(r)}if(i){const c=p.find(l=>l.id===i);if(c){if(c.duoId&&c.duoId!==r.id){const l=p.find(d=>d.id===c.duoId);l&&(l.duoId=null)}c.duoId=r.id}}j("playerModal"),saveAndRender()}function $e(e){confirm("ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&(p=p.filter(t=>t.id!==e),p.forEach(t=>{t.duoId===e&&(t.duoId=null)}),saveAndRender())}function Be(e){if(!e.duoId)return null;const t=Math.min(e.id,e.duoId);return window.DUO_COLORS?window.DUO_COLORS[t%window.DUO_COLORS.length]:null}function xe(){return p}window.openModal=be;window.closeModal=j;window.renderSelectedChampsPreview=M;window.toggleChampSelection=Me;window.updateChampGridSelection=ge;window.updateChampCount=me;window.confirmChampSelect=Pe;window.savePlayer=De;window.removePlayer=$e;window.getDuoColor=Be;window.getParticipants=xe;const Ge=["TOP","JUG","MID","ADC","SUP"],Ue={TOP:"íƒ‘",JUG:"ì •ê¸€",MID:"ë¯¸ë“œ",ADC:"ì›ë”œ",SUP:"ì„œí¿",ALL:"ëœë¤",NONE:"ì—†ìŒ"},He=["#fd79a8","#00b894","#0984e3","#e17055","#6c5ce7","#fdcb6e"];let je={TOP:1,JUG:1,MID:1,ADC:1,SUP:1};const he=[{name:"ì•„ì´ì–¸ 4",score:100},{name:"ì•„ì´ì–¸ 3",score:125},{name:"ì•„ì´ì–¸ 2",score:150},{name:"ì•„ì´ì–¸ 1",score:175},{name:"ë¸Œë¡ ì¦ˆ 4",score:300},{name:"ë¸Œë¡ ì¦ˆ 3",score:325},{name:"ë¸Œë¡ ì¦ˆ 2",score:350},{name:"ë¸Œë¡ ì¦ˆ 1",score:375},{name:"ì‹¤ë²„ 4",score:500},{name:"ì‹¤ë²„ 3",score:525},{name:"ì‹¤ë²„ 2",score:550},{name:"ì‹¤ë²„ 1",score:575},{name:"ê³¨ë“œ 4",score:700},{name:"ê³¨ë“œ 3",score:725},{name:"ê³¨ë“œ 2",score:750},{name:"ê³¨ë“œ 1",score:775},{name:"í”Œë˜í‹°ë„˜ 4",score:900},{name:"í”Œë˜í‹°ë„˜ 3",score:925},{name:"í”Œë˜í‹°ë„˜ 2",score:950},{name:"í”Œë˜í‹°ë„˜ 1",score:975},{name:"ì—ë©”ë„ë“œ 4",score:1100},{name:"ì—ë©”ë„ë“œ 3",score:1125},{name:"ì—ë©”ë„ë“œ 2",score:1150},{name:"ì—ë©”ë„ë“œ 1",score:1175},{name:"ë‹¤ì´ì•„ 4",score:1300},{name:"ë‹¤ì´ì•„ 3",score:1325},{name:"ë‹¤ì´ì•„ 2",score:1350},{name:"ë‹¤ì´ì•„ 1",score:1375},{name:"ë§ˆìŠ¤í„°",score:1500},{name:"ê·¸ëœë“œë§ˆìŠ¤í„°",score:1700},{name:"ì±Œë¦°ì €",score:2e3}];function ke(e){if(!window.championList)return e;const t=window.championList.find(n=>n.id===e);return t?t.name:e}function Ke(){const e=document.getElementById("pName"),t=e?e.value.trim():"";if(!t)return alert("ì´ë¦„ì„ ë¨¼ì € ì…ë ¥í•˜ì„¸ìš”.");const n={n:t,s:parseInt(document.getElementById("pTierCombined").value),t:document.getElementById("pTargetPos").value,u:document.getElementById("pSubPos").value,m:document.getElementById("pMainPos").value,a:document.getElementById("pAvoidPos").value,c:[...tempSelectedChamps]},o=JSON.stringify(n),s=LZString.compressToEncodedURIComponent(o);navigator.clipboard&&window.isSecureContext?navigator.clipboard.writeText(s).then(()=>alert("ì••ì¶•ëœ ê³µìœ  ì½”ë“œê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!")):prompt("ì•„ë˜ ì½”ë“œë¥¼ ë³µì‚¬í•˜ì„¸ìš”:",s)}function Fe(){const e=document.getElementById("importCode"),t=e?e.value.trim():"";if(t)try{const n=LZString.decompressFromEncodedURIComponent(t);if(!n)throw new Error("ì••ì¶• í•´ì œ ì‹¤íŒ¨");const o=JSON.parse(n),s=he.find(i=>i.score===o.s)||{name:"Unknown"};players.push({id:Date.now(),name:o.n,baseScore:o.s,tierName:s.name,targetPos:o.t,subPos:o.u,mainPos:o.m,avoidPos:o.a,champ:o.c||[]}),e.value="",saveAndRender()}catch(n){console.error(n),alert("ì˜¬ë°”ë¥´ì§€ ì•Šê±°ë‚˜ ì†ìƒëœ ì½”ë“œì…ë‹ˆë‹¤.")}}function Ye(){const e=document.getElementById("resultArea");if(!e||e.style.display==="none")return alert("ê²°ê³¼ê°€ ìƒì„±ëœ í›„ì— ìº¡ì²˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");const t=document.getElementById("btnCapture"),n=t.innerText;t.innerText="ğŸ“¸ ìº¡ì²˜ ì¤‘...",t.disabled=!0,html2canvas(e,{backgroundColor:"#121212",scale:2,useCORS:!0,logging:!1}).then(s=>{s.toBlob(i=>{if(!i){alert("ì´ë¯¸ì§€ ìƒì„± ì‹¤íŒ¨"),o();return}try{const a=new ClipboardItem({"image/png":i});navigator.clipboard.write([a]).then(()=>{alert(`âœ… ì´ë¯¸ì§€ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!
ë””ìŠ¤ì½”ë“œ ì…ë ¥ì°½ì— ë¶™ì—¬ë„£ê¸°(Ctrl+V) í•˜ì„¸ìš”.`),o()}).catch(r=>{console.error("í´ë¦½ë³´ë“œ ì“°ê¸° ì‹¤íŒ¨:",r),alert("í´ë¦½ë³´ë“œ ì ‘ê·¼ ê¶Œí•œì´ ì—†ê±°ë‚˜ ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì €ì…ë‹ˆë‹¤."),o()})}catch(a){console.error("ClipboardItem ì˜¤ë¥˜:",a),alert("ì´ ë¸Œë¼ìš°ì €ì—ì„œëŠ” ì´ë¯¸ì§€ ë³µì‚¬ë¥¼ ì§€ì›í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤."),o()}})}).catch(s=>{console.error("html2canvas ì˜¤ë¥˜:",s),alert("ìº¡ì²˜ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."),o()});function o(){t.innerText=n,t.disabled=!1}}function Ve(e){const t=new Audio(`sounds/${e}.mp3`);t.volume=.5,t.play()}window.LANES=Ge;window.LANE_NAMES=Ue;window.DUO_COLORS=He;window.LANE_WEIGHTS=je;window.TIER_DATA=he;window.getChampName=ke;window.generateModalCode=Ke;window.importPlayerCode=Fe;window.copyResultImage=Ye;window.playSound=Ve;championList!=="undefined"?window.championList=championList:console.warn("championList.jsê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.");window.AI_PROVIDER=localStorage.getItem("ai_provider")||"openai";window.OPENAI_API_KEY=localStorage.getItem("openai_key")||"";window.GEMINI_API_KEY=localStorage.getItem("gemini_key")||"";function qe(){const e=document.getElementById("aiProviderSelect"),t=document.getElementById("openaiKeyInput"),n=document.getElementById("geminiKeyInput");e&&(window.AI_PROVIDER=e.value,localStorage.setItem("ai_provider",e.value)),t&&(window.OPENAI_API_KEY=t.value,localStorage.setItem("openai_key",t.value)),n&&(window.GEMINI_API_KEY=n.value,localStorage.setItem("gemini_key",n.value))}window.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("aiProviderSelect"),t=document.getElementById("openaiKeyInput"),n=document.getElementById("geminiKeyInput");e&&window.AI_PROVIDER&&(e.value=window.AI_PROVIDER),t&&window.OPENAI_API_KEY&&(t.value=window.OPENAI_API_KEY),n&&window.GEMINI_API_KEY&&(n.value=window.GEMINI_API_KEY)});function pe(){const e="ë‹¹ì‹ ì€ LoL ì „ë¬¸ í•´ì„¤ê°€ì…ë‹ˆë‹¤. ë¶„ì„ì ì´ê³  ìœ„íŠ¸ ìˆê²Œ ê²Œì„ ì–‘ìƒì„ ì˜ˆì¸¡í•´ì£¼ì„¸ìš”.";let t=`[ë¸”ë£¨íŒ€]
`;return LANES.forEach(n=>{const o=lastBlueSlots[n],s=o&&o.champ&&o.champ.length?o.champ.map(i=>getChampName(i)).join(","):"ëª¨ë¦„";t+=`- ${LANE_NAMES[n]}: ${o?o.name:"ë¹„ì–´ìˆìŒ"} (${o?o.tierName:"-"}) [${s}]
`}),t+=`
[ë ˆë“œíŒ€]
`,LANES.forEach(n=>{const o=lastRedSlots[n],s=o&&o.champ&&o.champ.length?o.champ.map(i=>getChampName(i)).join(","):"ëª¨ë¦„";t+=`- ${LANE_NAMES[n]}: ${o?o.name:"ë¹„ì–´ìˆìŒ"} (${o?o.tierName:"-"}) [${s}]
`}),AI_PROVIDER==="gemini"?`${e}

${t}

ë¶„ì„ í•­ëª©: 1.ğŸ”¥ê²©ì „ì§€ 2.âš–ï¸ì–‘ìƒ 3.ğŸ‘‘ìŠ¹ë¦¬í”Œëœ 4.ğŸ™ï¸í•œì¤„í‰`:t+`
í•­ëª©: 1.ğŸ”¥ê²©ì „ì§€ 2.âš–ï¸ì–‘ìƒ 3.ğŸ‘‘ìŠ¹ë¦¬í”Œëœ 4.ğŸ™ï¸í•œì¤„í‰`}async function Ee(e,t){const o=await(await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"system",content:"ë‹¹ì‹ ì€ LoL ì „ë¬¸ í•´ì„¤ê°€ì…ë‹ˆë‹¤."},{role:"user",content:t}],max_tokens:600})})).json();if(o.error)throw new Error(o.error.message);return o.choices[0].message.content}async function Ie(e,t){const n=`https://generativelanguage.googleapis.com/v1beta/models/gemini-3-flash-preview:generateContent?key=${e}`,i=await(await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{role:"user",parts:[{text:t}]}]})})).json();if(i.response&&i.response.candidates&&i.response.candidates[0]?.content?.parts[0]?.text)return i.response.candidates[0].content.parts[0].text;if(i.candidates&&i.candidates[0]?.content?.parts[0]?.text)return i.candidates[0].content.parts[0].text;if(i.text)return i.text;if(i.error)throw new Error(i.error.message);return"ë¶„ì„ ì‹¤íŒ¨"}async function Je(){if(!lastBlueSlots||!lastRedSlots)return alert("ë¨¼ì € íŒ€ ë°°ì •ì„ ì™„ë£Œí•´ì£¼ì„¸ìš”.");const e=AI_PROVIDER==="gemini"?GEMINI_API_KEY:OPENAI_API_KEY;if(!e){alert("API Keyê°€ ì—†ìŠµë‹ˆë‹¤. ì„¤ì •ì—ì„œ ì…ë ¥í•´ì£¼ì„¸ìš”."),openSettings();return}document.getElementById("aiModal");const t=document.getElementById("aiLoading"),n=document.getElementById("aiResultContent");showModal("aiModal"),t.style.display="block",n.style.display="none",n.innerHTML="";const o=pe();try{let s="";AI_PROVIDER==="gemini"?s=await Ie(e,o):s=await Ee(e,o),t.style.display="none",n.style.display="block",n.innerHTML=marked.parse(s)}catch(s){t.style.display="none",n.style.display="block",n.innerHTML=`<p style="color: #e74c3c;">âš ï¸ ì˜¤ë¥˜: ${s.message}</p>`;let i=`[AI ë¶„ì„ ì˜ˆì™¸ ë°œìƒ!]
ì—ëŸ¬: `+(s&&s.message?s.message:s)+`
`+(s&&s.stack?"ìŠ¤íƒ: "+s.stack+`
`:"")+"AI_PROVIDER: "+(typeof AI_PROVIDER<"u"?AI_PROVIDER:"undefined")+`
API Key: `+(e?e.slice(0,6)+"...":"ì—†ìŒ")+`
Prompt: `+(o?o.slice(0,120)+(o.length>120?"...":""):"ì—†ìŒ");alert(i)}}function We(e){const t=document.getElementById("openaiKeyArea"),n=document.getElementById("geminiKeyArea");e==="openai"?(t&&(t.style.display=""),n&&(n.style.display="none")):e==="gemini"&&(t&&(t.style.display="none"),n&&(n.style.display=""))}window.analyzeGameAI=Je;window.createAiPrompt=pe;window.fetchOpenAIResponse=Ee;window.fetchGeminiResponse=Ie;window.saveApiKeys=qe;window.toggleAiInput=We;function ze(){if(players.length===0)return alert("ì €ì¥í•  í”Œë ˆì´ì–´ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.");const e={version:"v21.0",timestamp:new Date().toISOString(),players},t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),o=URL.createObjectURL(n),s=document.createElement("a"),i=new Date,a=`lol_cw_${i.getFullYear()}${(i.getMonth()+1).toString().padStart(2,"0")}${i.getDate().toString().padStart(2,"0")}_${i.getHours()}${i.getMinutes()}.json`;s.href=o,s.download=a,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(o)}function Xe(e){const t=e.files[0];if(!t)return;const n=new FileReader;n.onload=function(o){try{const s=o.target.result,i=JSON.parse(s);i.players&&Array.isArray(i.players)?(confirm("í˜„ì¬ ë¦¬ìŠ¤íŠ¸ë¥¼ ì§€ìš°ê³  ë¶ˆëŸ¬ì˜¨ íŒŒì¼ë¡œ ëŒ€ì²´í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")?players=i.players:players=[...players,...i.players],saveAndRender(),alert(`ì„±ê³µì ìœ¼ë¡œ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤! (${i.players.length}ëª…)`)):alert("ì˜¬ë°”ë¥´ì§€ ì•Šì€ ë¡œìŠ¤í„° íŒŒì¼ í˜•ì‹ì…ë‹ˆë‹¤.")}catch(s){console.error(s),alert("íŒŒì¼ì„ ì½ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}},n.readAsText(t),e.value=""}window.saveRosterToFile=ze;window.handleFileLoad=Xe;let we=null,ye=null;function Qe(){if(getParticipants().length<2)return alert("ìµœì†Œ 2ëª…");let e={},t={};window.LANES.forEach(l=>{e[l]=null,t[l]=null});let n=[],o=[],i=[...[...getParticipants()].sort((l,d)=>d.baseScore-l.baseScore||l.name.localeCompare(d.name))];i=T(i,"1ST",e,t,n,o,1),i=G(i,.9),i=T(i,"2ND",e,t,n,o,.9),i=G(i,.95),i=T(i,"MAIN",e,t,n,o,.95),i=G(i,.7),i.forEach(l=>{if(ve(l.id,e,t))return;let d=[],g=Math.round(l.baseScore*.7);if(n.length<5&&V(e,"BLUE",d,g,t,l.avoidPos),o.length<5&&V(t,"RED",d,g,e,l.avoidPos),d.sort((u,f)=>u.gap-f.gap),d.length>0){let u=d[0],f=u.team==="BLUE"?e:t,m=u.team==="BLUE"?n:o;S(f,m,u.lane,l,"AUTO",.7)&&window.IS_DUO_ACTIVE&&U(l,f,m,e,t)}else Ae(l,e,t,n,o)}),we=e,ye=t,Y(e),Y(t),Ze(e,t),H("blueList","blueScoreDisp",e,"BLUE"),H("redList","redScoreDisp",t,"RED");const a=document.getElementById("resultArea");a&&(a.style.display="flex",setTimeout(()=>a.scrollIntoView({behavior:"smooth"}),100));const r=document.getElementById("shareSection");r&&(r.style.display="flex");const c=document.getElementById("aiAnalyzeSection");c&&(c.style.display="flex")}function U(e,t,n,o,s){if(!window.IS_DUO_ACTIVE||!e.duoId)return!1;const i=getParticipants().find(a=>a.id===e.duoId);return!i||ve(i.id,o,s)||n.length>=5?!1:P(t,i.targetPos,i.avoidPos)?(S(t,n,i.targetPos,i,"DUO",1),!0):P(t,i.subPos,i.avoidPos)?(S(t,n,i.subPos,i,"DUO",.95),!0):!1}function ve(e,t,n,o=null){if(o)return Object.values(o).some(i=>i&&i.id===e);let s=!1;return t&&(s=s||Object.values(t).some(i=>i&&i.id===e)),n&&(s=s||Object.values(n).some(i=>i&&i.id===e)),s}function G(e,t){return e.map(n=>({...n,tempScore:Math.round(n.baseScore*t)})).sort((n,o)=>o.tempScore-n.tempScore||n.name.localeCompare(o.name))}function T(e,t,n,o,s,i,a){let r=[],c=new Set;return[n,o].forEach(l=>{Object.values(l).forEach(d=>{d&&c.add(d.id)})}),e.forEach(l=>{if(c.has(l.id))return;let d=!1,g=null,u=t;if(t==="1ST"?l.targetPos!=="ALL"?(d=!0,g=l.targetPos):(d=!0,g="ALL",u="1ST_RAND"):t==="2ND"?l.subPos!=="ALL"?(d=!0,g=l.subPos):(d=!0,g="ALL",u="2ND_RAND"):t==="MAIN"&&l.mainPos!=="ALL"&&(d=!0,g=l.mainPos),!d){r.push(l);return}let f=!1,m=F(s),I=F(i),v;s.length<i.length?v=!0:i.length<s.length?v=!1:v=m<=I;let $=v?n:o,K=v?s:i,B=v?o:n,x=v?i:s;P($,g,l.avoidPos)?(S($,K,g,l,u,a),f=!0,c.add(l.id),U(l,$,K,n,o)&&l.duoId&&c.add(l.duoId)):x.length<5&&P(B,g,l.avoidPos)&&(S(B,x,g,l,u,a),f=!0,c.add(l.id),U(l,B,x,n,o)&&l.duoId&&c.add(l.duoId)),f||r.push(l)}),r.filter(l=>!c.has(l.id))}function F(e){return e.reduce((t,n)=>t+n.finalScore*(window.LANE_WEIGHTS[n.assignedLane]||1),0)}function Ae(e,t,n,o,s){let i=o.length<5?o:s,a=o.length<5?t:n,r=window.LANES.find(c=>a[c]===null);!r&&o.length<5&&(i=i===o?s:o,a=a===t?n:t,r=window.LANES.find(c=>a[c]===null)),r&&S(a,i,r,e,"FORCE",.5)}function P(e,t,n){return t==="ALL"?window.LANES.some(o=>e[o]===null&&o!==n):t===n?!1:e[t]===null}function S(e,t,n,o,s,i){let a=n;return(n==="ALL"||s.includes("RAND")||s==="AUTO"||s==="FORCE")&&(a=window.LANES.find(r=>e[r]===null&&(s==="FORCE"?!0:r!==o.avoidPos))),a?(o.finalScore=Math.round(o.baseScore*i),o.isUnderdog=!1,o.isAce=!1,e[a]={...o,assignType:s,assignedLane:a},t.push(o),!0):!1}function Y(e){let t=null,n=-1;window.LANES.forEach(o=>{const s=e[o];s&&["1ST","1ST_RAND","2ND","2ND_RAND","MAIN"].includes(s.assignType)&&s.mainPos===s.assignedLane&&s.finalScore>n&&(n=s.finalScore,t=s)}),t&&(t.isAce=!0)}function V(e,t,n,o,s,i){window.LANES.forEach(a=>{if(e[a]===null&&(i==="IGNORE"||a!==i)){let r=s[a],c=5e3;r&&(c=Math.abs(o-r.finalScore)),n.push({team:t,lane:a,gap:c})}})}function Ze(e,t){window.LANES.forEach(n=>{const o=e[n],s=t[n];o&&s&&Math.abs(o.finalScore-s.finalScore)>=350&&(o.finalScore<s.finalScore?o.isUnderdog=!0:s.isUnderdog=!0)})}function H(e,t,n,o){const s=document.getElementById(e);let i=0;s.innerHTML="",window.LANES.forEach(a=>{const r=n[a];let c=`<div class="role-row" draggable="true" ondragstart="handleDragStart(event,'${o}','${a}')" ondragend="handleDragEnd(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" ondrop="handleDrop(event,'${o}')" onclick="this.classList.toggle('active')">`;if(r){i+=r.finalScore*window.LANE_WEIGHTS[a];let l="";window.IS_DUO_ACTIVE&&r.duoId&&Object.values(n).some(g=>g&&g.id===r.duoId)?l=`<span class="pref-badge" style="background:${window.getDuoColor?window.getDuoColor(r):""}">ğŸ”— ë“€ì˜¤</span>`:l=`<span class="pref-badge pref-${r.assignType.toLowerCase().split("_")[0]}">${r.assignType}</span>`,r.isAce&&(l+=' <span class="ace-badge">ğŸ‘‘ ACE</span>'),r.isUnderdog&&(l+=' <span class="pref-badge gap-warning">âš ï¸ ì—´ì„¸</span>');let d="";r.champ?.length&&(d='<div class="result-champ-container">',r.champ.slice(0,10).forEach(g=>d+=`<img src="champion_images/${g}.png" class="result-champ-icon" title="${window.getChampName?window.getChampName(g):g}">`),d+="</div>"),c+=`<div class="role-icon lane-${a.toLowerCase()}"><div>${window.LANE_NAMES[a]}</div></div><div class="player-detail-col"><span class="player-name">${r.name} ${l}</span><div style="font-size:0.8rem; color:#888;">${r.tierName} (${window.LANE_NAMES[r.targetPos]})</div>${d}</div></div>`}else c+=`<div class="role-icon lane-${a.toLowerCase()}"><div>${window.LANE_NAMES[a]}</div></div><div style="flex:1;">(ë¹„ì–´ìˆìŒ)</div></div>`;s.innerHTML+=c})}window.calculateAndAssign=Qe;window.renderTR=H;window.attemptAssign=T;window.forceAssign=Ae;window.lastBlueSlots=we;window.lastRedSlots=ye;var q;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(q||(q={}));var J;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(J||(J={}));var W;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(W||(W={}));const z=["user","model","function","system"];var X;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(X||(X={}));var Q;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(Q||(Q={}));var Z;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(Z||(Z={}));var ee;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(ee||(ee={}));var O;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(O||(O={}));var te;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(te||(te={}));var ne;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(ne||(ne={}));var oe;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(oe||(oe={}));class h extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class C extends h{constructor(t,n){super(t),this.response=n}}class _e extends h{constructor(t,n,o,s){super(t),this.status=n,this.statusText=o,this.errorDetails=s}}class y extends h{}class Ce extends h{}const et="https://generativelanguage.googleapis.com",tt="v1beta",nt="0.24.1",ot="genai-js";var _;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(_||(_={}));class st{constructor(t,n,o,s,i){this.model=t,this.task=n,this.apiKey=o,this.stream=s,this.requestOptions=i}toString(){var t,n;const o=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||tt;let i=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||et}/${o}/${this.model}:${this.task}`;return this.stream&&(i+="?alt=sse"),i}}function it(e){const t=[];return e?.apiClient&&t.push(e.apiClient),t.push(`${ot}/${nt}`),t.join(" ")}async function at(e){var t;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",it(e.requestOptions)),n.append("x-goog-api-key",e.apiKey);let o=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(o){if(!(o instanceof Headers))try{o=new Headers(o)}catch(s){throw new y(`unable to convert customHeaders value ${JSON.stringify(o)} to Headers: ${s.message}`)}for(const[s,i]of o.entries()){if(s==="x-goog-api-key")throw new y(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new y(`Header name ${s} can only be set using the apiClient field`);n.append(s,i)}}return n}async function rt(e,t,n,o,s,i){const a=new st(e,t,n,o,i);return{url:a.toString(),fetchOptions:Object.assign(Object.assign({},ut(i)),{method:"POST",headers:await at(a),body:s})}}async function L(e,t,n,o,s,i={},a=fetch){const{url:r,fetchOptions:c}=await rt(e,t,n,o,s,i);return ct(r,c,a)}async function ct(e,t,n=fetch){let o;try{o=await n(e,t)}catch(s){lt(s,e)}return o.ok||await dt(o,e),o}function lt(e,t){let n=e;throw n.name==="AbortError"?(n=new Ce(`Request aborted when fetching ${t.toString()}: ${e.message}`),n.stack=e.stack):e instanceof _e||e instanceof y||(n=new h(`Error fetching from ${t.toString()}: ${e.message}`),n.stack=e.stack),n}async function dt(e,t){let n="",o;try{const s=await e.json();n=s.error.message,s.error.details&&(n+=` ${JSON.stringify(s.error.details)}`,o=s.error.details)}catch{}throw new _e(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${n}`,e.status,e.statusText,o)}function ut(e){const t={};if(e?.signal!==void 0||e?.timeout>=0){const n=new AbortController;e?.timeout>=0&&setTimeout(()=>n.abort(),e.timeout),e?.signal&&e.signal.addEventListener("abort",()=>{n.abort()}),t.signal=n.signal}return t}function k(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),b(e.candidates[0]))throw new C(`${w(e)}`,e);return ft(e)}else if(e.promptFeedback)throw new C(`Text not available. ${w(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),b(e.candidates[0]))throw new C(`${w(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),se(e)[0]}else if(e.promptFeedback)throw new C(`Function call not available. ${w(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),b(e.candidates[0]))throw new C(`${w(e)}`,e);return se(e)}else if(e.promptFeedback)throw new C(`Function call not available. ${w(e)}`,e)},e}function ft(e){var t,n,o,s;const i=[];if(!((n=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||n===void 0)&&n.parts)for(const a of(s=(o=e.candidates)===null||o===void 0?void 0:o[0].content)===null||s===void 0?void 0:s.parts)a.text&&i.push(a.text),a.executableCode&&i.push("\n```"+a.executableCode.language+`
`+a.executableCode.code+"\n```\n"),a.codeExecutionResult&&i.push("\n```\n"+a.codeExecutionResult.output+"\n```\n");return i.length>0?i.join(""):""}function se(e){var t,n,o,s;const i=[];if(!((n=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||n===void 0)&&n.parts)for(const a of(s=(o=e.candidates)===null||o===void 0?void 0:o[0].content)===null||s===void 0?void 0:s.parts)a.functionCall&&i.push(a.functionCall);if(i.length>0)return i}const gt=[O.RECITATION,O.SAFETY,O.LANGUAGE];function b(e){return!!e.finishReason&&gt.includes(e.finishReason)}function w(e){var t,n,o;let s="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)s+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(s+=` due to ${e.promptFeedback.blockReason}`),!((n=e.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(s+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((o=e.candidates)===null||o===void 0)&&o[0]){const i=e.candidates[0];b(i)&&(s+=`Candidate was blocked due to ${i.finishReason}`,i.finishMessage&&(s+=`: ${i.finishMessage}`))}return s}function N(e){return this instanceof N?(this.v=e,this):new N(e)}function mt(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(e,t||[]),s,i=[];return s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s;function a(u){o[u]&&(s[u]=function(f){return new Promise(function(m,I){i.push([u,f,m,I])>1||r(u,f)})})}function r(u,f){try{c(o[u](f))}catch(m){g(i[0][3],m)}}function c(u){u.value instanceof N?Promise.resolve(u.value.v).then(l,d):g(i[0][2],u)}function l(u){r("next",u)}function d(u){r("throw",u)}function g(u,f){u(f),i.shift(),i.length&&r(i[0][0],i[0][1])}}const ie=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function ht(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=It(t),[o,s]=n.tee();return{stream:Et(o),response:pt(s)}}async function pt(e){const t=[],n=e.getReader();for(;;){const{done:o,value:s}=await n.read();if(o)return k(wt(t));t.push(s)}}function Et(e){return mt(this,arguments,function*(){const n=e.getReader();for(;;){const{value:o,done:s}=yield N(n.read());if(s)break;yield yield N(k(o))}})}function It(e){const t=e.getReader();return new ReadableStream({start(o){let s="";return i();function i(){return t.read().then(({value:a,done:r})=>{if(r){if(s.trim()){o.error(new h("Failed to parse stream"));return}o.close();return}s+=a;let c=s.match(ie),l;for(;c;){try{l=JSON.parse(c[1])}catch{o.error(new h(`Error parsing JSON response: "${c[1]}"`));return}o.enqueue(l),s=s.substring(c[0].length),c=s.match(ie)}return i()}).catch(a=>{let r=a;throw r.stack=a.stack,r.name==="AbortError"?r=new Ce("Request aborted when reading from the stream"):r=new h("Error reading from the stream"),r})}}})}function wt(e){const t=e[e.length-1],n={promptFeedback:t?.promptFeedback};for(const o of e){if(o.candidates){let s=0;for(const i of o.candidates)if(n.candidates||(n.candidates=[]),n.candidates[s]||(n.candidates[s]={index:s}),n.candidates[s].citationMetadata=i.citationMetadata,n.candidates[s].groundingMetadata=i.groundingMetadata,n.candidates[s].finishReason=i.finishReason,n.candidates[s].finishMessage=i.finishMessage,n.candidates[s].safetyRatings=i.safetyRatings,i.content&&i.content.parts){n.candidates[s].content||(n.candidates[s].content={role:i.content.role||"user",parts:[]});const a={};for(const r of i.content.parts)r.text&&(a.text=r.text),r.functionCall&&(a.functionCall=r.functionCall),r.executableCode&&(a.executableCode=r.executableCode),r.codeExecutionResult&&(a.codeExecutionResult=r.codeExecutionResult),Object.keys(a).length===0&&(a.text=""),n.candidates[s].content.parts.push(a)}s++}o.usageMetadata&&(n.usageMetadata=o.usageMetadata)}return n}async function Se(e,t,n,o){const s=await L(t,_.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(n),o);return ht(s)}async function Oe(e,t,n,o){const i=await(await L(t,_.GENERATE_CONTENT,e,!1,JSON.stringify(n),o)).json();return{response:k(i)}}function Ne(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function R(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const n of e)typeof n=="string"?t.push({text:n}):t.push(n);return yt(t)}function yt(e){const t={role:"user",parts:[]},n={role:"function",parts:[]};let o=!1,s=!1;for(const i of e)"functionResponse"in i?(n.parts.push(i),s=!0):(t.parts.push(i),o=!0);if(o&&s)throw new h("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!o&&!s)throw new h("No content is provided for sending chat message.");return o?t:n}function vt(e,t){var n;let o={model:t?.model,generationConfig:t?.generationConfig,safetySettings:t?.safetySettings,tools:t?.tools,toolConfig:t?.toolConfig,systemInstruction:t?.systemInstruction,cachedContent:(n=t?.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const s=e.generateContentRequest!=null;if(e.contents){if(s)throw new y("CountTokensRequest must have one of contents or generateContentRequest, not both.");o.contents=e.contents}else if(s)o=Object.assign(Object.assign({},o),e.generateContentRequest);else{const i=R(e);o.contents=[i]}return{generateContentRequest:o}}function ae(e){let t;return e.contents?t=e:t={contents:[R(e)]},e.systemInstruction&&(t.systemInstruction=Ne(e.systemInstruction)),t}function At(e){return typeof e=="string"||Array.isArray(e)?{content:R(e)}:e}const re=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],_t={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Ct(e){let t=!1;for(const n of e){const{role:o,parts:s}=n;if(!t&&o!=="user")throw new h(`First content should be with role 'user', got ${o}`);if(!z.includes(o))throw new h(`Each item should include role field. Got ${o} but valid roles are: ${JSON.stringify(z)}`);if(!Array.isArray(s))throw new h("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new h("Each Content should have at least one part");const i={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const r of s)for(const c of re)c in r&&(i[c]+=1);const a=_t[o];for(const r of re)if(!a.includes(r)&&i[r]>0)throw new h(`Content with role '${o}' can't contain '${r}' part`);t=!0}}function ce(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const o of n.parts)if(o===void 0||Object.keys(o).length===0||o.text!==void 0&&o.text==="")return!1;return!0}const le="SILENT_ERROR";class St{constructor(t,n,o,s={}){this.model=n,this.params=o,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,o?.history&&(Ct(o.history),this._history=o.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,n={}){var o,s,i,a,r,c;await this._sendPromise;const l=R(t),d={safetySettings:(o=this.params)===null||o===void 0?void 0:o.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(i=this.params)===null||i===void 0?void 0:i.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(r=this.params)===null||r===void 0?void 0:r.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,l]},g=Object.assign(Object.assign({},this._requestOptions),n);let u;return this._sendPromise=this._sendPromise.then(()=>Oe(this._apiKey,this.model,d,g)).then(f=>{var m;if(ce(f.response)){this._history.push(l);const I=Object.assign({parts:[],role:"model"},(m=f.response.candidates)===null||m===void 0?void 0:m[0].content);this._history.push(I)}else{const I=w(f.response);I&&console.warn(`sendMessage() was unsuccessful. ${I}. Inspect response object for details.`)}u=f}).catch(f=>{throw this._sendPromise=Promise.resolve(),f}),await this._sendPromise,u}async sendMessageStream(t,n={}){var o,s,i,a,r,c;await this._sendPromise;const l=R(t),d={safetySettings:(o=this.params)===null||o===void 0?void 0:o.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(i=this.params)===null||i===void 0?void 0:i.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(r=this.params)===null||r===void 0?void 0:r.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,l]},g=Object.assign(Object.assign({},this._requestOptions),n),u=Se(this._apiKey,this.model,d,g);return this._sendPromise=this._sendPromise.then(()=>u).catch(f=>{throw new Error(le)}).then(f=>f.response).then(f=>{if(ce(f)){this._history.push(l);const m=Object.assign({},f.candidates[0].content);m.role||(m.role="model"),this._history.push(m)}else{const m=w(f);m&&console.warn(`sendMessageStream() was unsuccessful. ${m}. Inspect response object for details.`)}}).catch(f=>{f.message!==le&&console.error(f)}),u}}async function Ot(e,t,n,o){return(await L(t,_.COUNT_TOKENS,e,!1,JSON.stringify(n),o)).json()}async function Nt(e,t,n,o){return(await L(t,_.EMBED_CONTENT,e,!1,JSON.stringify(n),o)).json()}async function Rt(e,t,n,o){const s=n.requests.map(a=>Object.assign(Object.assign({},a),{model:t}));return(await L(t,_.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:s}),o)).json()}class de{constructor(t,n,o={}){this.apiKey=t,this._requestOptions=o,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=Ne(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(t,n={}){var o;const s=ae(t),i=Object.assign(Object.assign({},this._requestOptions),n);return Oe(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(o=this.cachedContent)===null||o===void 0?void 0:o.name},s),i)}async generateContentStream(t,n={}){var o;const s=ae(t),i=Object.assign(Object.assign({},this._requestOptions),n);return Se(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(o=this.cachedContent)===null||o===void 0?void 0:o.name},s),i)}startChat(t){var n;return new St(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},t),this._requestOptions)}async countTokens(t,n={}){const o=vt(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),n);return Ot(this.apiKey,this.model,o,s)}async embedContent(t,n={}){const o=At(t),s=Object.assign(Object.assign({},this._requestOptions),n);return Nt(this.apiKey,this.model,o,s)}async batchEmbedContents(t,n={}){const o=Object.assign(Object.assign({},this._requestOptions),n);return Rt(this.apiKey,this.model,t,o)}}class Lt{constructor(t){this.apiKey=t}getGenerativeModel(t,n){if(!t.model)throw new h("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new de(this.apiKey,t,n)}getGenerativeModelFromCachedContent(t,n,o){if(!t.name)throw new y("Cached content must contain a `name` field.");if(!t.model)throw new y("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const a of s)if(n?.[a]&&t[a]&&n?.[a]!==t[a]){if(a==="model"){const r=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,c=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(r===c)continue}throw new y(`Different value for "${a}" specified in modelParams (${n[a]}) and cachedContent (${t[a]})`)}const i=Object.assign(Object.assign({},n),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new de(this.apiKey,i,o)}}const ue=window.GEMINI_API_KEY||"",Re="gemini-3-flash-preview";let D=null;ue&&(D=new Lt(ue));async function Tt(e,t={}){if(!D)throw new Error("Gemini API í‚¤ê°€ ì—†ìŠµë‹ˆë‹¤.");return(await D.getGenerativeModel({model:Re}).generateContent({contents:e,...t})).response.text()}window.gemini={chat:Tt,getGenAI:()=>D,model:Re};document.addEventListener("DOMContentLoaded",()=>{const t=new URLSearchParams(window.location.search).get("d");t?decodeData(t)?(console.log("URLì—ì„œ ë°ì´í„°ë¥¼ ë³µì›í–ˆìŠµë‹ˆë‹¤."),window.history.replaceState({},document.title,window.location.pathname),setTimeout(calculateAndAssign,500)):(alert("ê³µìœ ëœ ë§í¬ì˜ ë°ì´í„°ê°€ ì†ìƒë˜ì—ˆê±°ë‚˜ í˜¸í™˜ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤."),fe()):fe(),bt(),Mt(),Le()});function bt(){const e=document.getElementById("pTierCombined");e&&(e.innerHTML="",TIER_DATA.forEach(i=>{let a=document.createElement("option");a.value=i.score,a.text=i.name,i.name==="ê³¨ë“œ 4"&&(a.selected=!0),e.appendChild(a)}));const t=LANES.map(i=>({v:i,n:LANE_NAMES[i]}));t.push({v:"ALL",n:"ğŸ² ëœë¤"}),["pTargetPos","pSubPos","pMainPos"].forEach(i=>{const a=document.getElementById(i);a&&(a.innerHTML="",t.forEach(r=>a.innerHTML+=`<option value="${r.v}">${r.n}</option>`))});const n=[{v:"NONE",n:"ì—†ìŒ"},...LANES.map(i=>({v:i,n:LANE_NAMES[i]}))],o=document.getElementById("pAvoidPos");o&&(o.innerHTML="",n.forEach(i=>o.innerHTML+=`<option value="${i.v}">${i.n}</option>`));const s=document.getElementById("weightInputs");s&&(s.innerHTML="",LANES.forEach(i=>{s.innerHTML+=`
            <div class="slider-row">
                <label>${LANE_NAMES[i]}</label>
                <input type="range" min="0.5" max="1.5" step="0.1" value="1.0" oninput="updateWeight('${i}', this.value)">
                <span id="wVal_${i}" class="slider-val">1.0</span>
            </div>`}))}function Mt(){const e=document.getElementById("champGrid");e&&(e.innerHTML="",window.championList.forEach(t=>{const n=document.createElement("div");n.className="champ-item",n.setAttribute("data-id",t.id),n.setAttribute("data-name",t.name),n.onclick=()=>toggleChampSelection(t.id),n.innerHTML=`
            <img src="champion_images/${t.id}.png" alt="${t.name}">
            <span>${t.name}</span>
        `,e.appendChild(n)}))}function Pt(){const e=document.getElementById("settingsModal");e&&(e.style.display="block");const t=document.getElementById("aiProviderSelect");t&&window.toggleAiInput(t.value)}window.openSettings=Pt;function Le(){const e=document.getElementById("playerList");if(!e)return;const t=document.getElementById("playerCount");t&&(t.innerText=`${players.length} / 10 ëª…`),e.innerHTML="",players.forEach(n=>{let o="";if(n.duoId){const a=players.find(r=>r.id===n.duoId);a&&(o=`<span class="badge duo" style="background:${getDuoColor(n)}">ğŸ”— ${a.name}</span>`)}const s=n.avoidPos!=="NONE"?`<span class="badge avoid">ğŸš« ${LANE_NAMES[n.avoidPos]}</span>`:"";let i="";Array.isArray(n.champ)&&n.champ.length>0&&(i='<div class="champ-preview-list">',n.champ.forEach(a=>{i+=`<img src="champion_images/${a}.png" class="champ-icon-small">`}),i+="</div>"),e.innerHTML+=`
        <div class="player-card">
            <div class="player-info" onclick="openModal('edit', ${n.id})">
                <span class="player-name">${n.name}</span>
                <div class="badges">
                    <span class="badge tier">${n.tierName}</span>
                    <span class="badge" style="background:#27ae60">1: ${LANE_NAMES[n.targetPos]}</span>
                    ${s} ${o}
                </div>
                ${i}
            </div>
            <button class="btn-del" onclick="removePlayer(${n.id})">Ã—</button>
        </div>`})}function fe(){const e=localStorage.getItem("lol_cw_v20_8");e&&(players=JSON.parse(e),Le())}
